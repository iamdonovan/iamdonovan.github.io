

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>searching + downloading satellite data using earthaccess &#8212; space cameras and glaciers</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" href="../../../_static/customstyle.css" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'teaching/egm722/practicals/earthaccess';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="zonal statistics using rasterstats" href="zonalstats.html" />
    <link rel="prev" title="raster data using rasterio" href="raster.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">space cameras and glaciers</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../whataboutbob.html">about me</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">teaching</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm101/index.html">EGM101: skills toolbox</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm101/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm101/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week5.html">computation, summary statistics, and graphing in excel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week6.html">summarizing and graphing data in spss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week7.html">correlation and regression in spss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week8.html">hypothesis testing using spss</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm101/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm310/index.html">EGM310: introduction to gis and remote sensing</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm310/lectures.html">lectures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../egm310/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm702/index.html">EGM702: photogrammetry and advanced image analysis</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm702/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm702/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/setup.html">software setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week1.html">dem processing using micmac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week2.html">dem differencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week3.html">introduction to google earth engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week4.html">change detection in earth engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week5.html">classification in earth engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm702/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm703/index.html">EGM703: advanced active and passive remote sensing</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm703/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm703/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week1.html">urban heat islands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week2.html">hyperspectral image analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week3.html">SAR image processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week4.html">InSAR Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week5.html">SAR image interpretation and flood mapping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm703/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html">EGM722: programming for gis and remote sensing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="../setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/jupyter.html">configuring jupyter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/pycharm.html">pycharm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/pip.html">installing packages with pip</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lectures.html">lectures</a></li>
<li class="toctree-l3 current active has-children"><a class="reference internal" href="index.html">practicals</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pythonintro.html">intro to python</a></li>
<li class="toctree-l4"><a class="reference internal" href="debugging.html">debugging exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="cartopy.html">mapping with cartopy</a></li>
<li class="toctree-l4"><a class="reference internal" href="conflicts.html">conflict resolution (using git)</a></li>
<li class="toctree-l4"><a class="reference internal" href="vector.html">vector data using shapely and geopandas</a></li>
<li class="toctree-l4"><a class="reference internal" href="folium.html">interactive maps with folium</a></li>
<li class="toctree-l4"><a class="reference internal" href="raster.html">raster data using rasterio</a></li>
<li class="toctree-l4 current active"><a class="current reference internal" href="#">searching + downloading satellite data using earthaccess</a></li>
<li class="toctree-l4"><a class="reference internal" href="zonalstats.html">zonal statistics using rasterstats</a></li>
<li class="toctree-l4"><a class="reference internal" href="geopandas.html">more fun with geopandas</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../faq/index.html">help! something went wrong!</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../faq/git.html">git troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faq/python.html">python troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../project/index.html">programming project</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/github.html">creating a new github repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/environment.html">environment.yml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/howto.html">EGM722: A how-to Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../unis/index.html">unis glaciology (AG-325)</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../unis/optical.html">mapping glacier area change</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unis/dems.html">dem differencing and geodetic mass balance</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../python-programming/index.html">programming skills for phd researchers (using python)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../python-programming/setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/jupyter.html">configuring the jupyterlab terminal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/pycharm.html">pycharm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python-programming/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../python-programming/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/git.html">introduction to version control using git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/project.html">starting a new project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/intro.html">introduction to python using jupyterlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/debugging.html">debugging code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/plotting.html">plotting data using seaborn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/pandas.html">working with pandas dataframes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/stats.html">basic statistical analysis using python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/regression.html">linear regression using python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python-programming/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../r-programming/index.html">programming skills for phd researchers (using R)</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../r-programming/setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/jupyter.html">configuring jupyterlab</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../r-programming/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../r-programming/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/git.html">introduction to version control using git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/project.html">starting a new project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/rintro.html">introduction to <strong>R</strong> using jupyterlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/debugging.html">debugging code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/plotting.html">plotting data using ggplot2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/transform.html">transforming data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/stats.html">basic statistical analysis using <strong>R</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/regression.html">linear regression using <strong>R</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../r-programming/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ml-crash-course/index.html">a crash course in machine learning (using python) – under development</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/setup.html">setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../ml-crash-course/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/regression.html">what is machine learning?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/training_testing.html">training, testing, and validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/feature_design.html">feature design and engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/performance.html">measuring model performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hpc-intro/index.html">introduction to high performance computing</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hpc-intro/setup.html">setup</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../hpc-intro/shell/index.html">the unix shell</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-24"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/shell.html">in the beginning was the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/navigation.html">navigating on the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/files.html">working with files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/input.html">input/output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/scripts.html">shell scripts</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../hpc-intro/hpc/index.html">high performance computing</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-25"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/atlas.html">atlas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/data_transfer.html">transferring data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/vulcan.html">vulcan</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../hpc-intro/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dissertation/index.html">undergraduate dissertation projects</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-26"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/glaciers.html">mapping glacier changes over time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/glacial_lakes.html">detection of supraglacial lakes and timing of drainage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/algae.html">mapping harmful algal blooms using satellite remote sensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/floods.html">flood detection and monitoring using remote sensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/wildfires.html">detection and mapping of wildfires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/heat_islands.html">urban heat islands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../gee/index.html">google earth engine</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-27"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../gee/tutorials/index.html">gee tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-28"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/getting_started/index.html">getting started</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-29"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/adding_exporting.html">adding and exporting images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/spectral.html">spectral signatures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/image_collections.html">image collections and vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/mapping.html">manual mapping (digitizing)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/band_maths.html">band maths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/zonal_stats.html">zonal statistics</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/classification/index.html">image classification</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-30"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/unsupervised.html">unsupervised classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/pixel.html">pixel-based classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/obia.html">object-based classification</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/change_detection/index.html">change detection</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-31"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/visual_analysis.html">visual analysis of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/thresholding.html">band maths and thresholding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/repeat_classification.html">repeat classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/cva.html">change vector analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/time_series.html">time series analysis</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/enhancement/index.html">image enhancement</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-32"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/filtering.html">image filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/pansharpening.html">pansharpening</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/edge_detection.html">edge detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/unmixing.html">spectral unmixing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/pca.html">principle component analysis</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/advanced/index.html">advanced topics</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-33"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/advanced/animation.html">creating an animation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../gee/exercises/index.html">sample exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../research/index.html">ongoing and past research projects</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-34"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../research/dar.html">deplete and retreat (DaR)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../writing/index.html">selected writing samples</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-35"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../writing/source.html">source magazine (summer 2022)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../github.html">github projects</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io/edit/main/teaching/egm722/practicals/earthaccess.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io/issues/new?title=Issue%20on%20page%20%2Fteaching/egm722/practicals/earthaccess.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/teaching/egm722/practicals/earthaccess.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>searching + downloading satellite data using earthaccess</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-netrc-file">the .netrc file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-permissions">changing permissions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gena-rowlands">Gena Rowlands</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-provided">data provided</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">getting started</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-a-search-area">preparing a search area</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-the-archive-for-images">searching the archive for images</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-to-the-api">connecting to the api</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-datasets">searching for datasets</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-granules">searching for granules</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-granules">downloading granules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-rasterio-to-mosaic-tiles">using rasterio to mosaic tiles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises-and-next-steps">exercises and next steps</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-and-references">notes and references</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="searching-downloading-satellite-data-using-earthaccess">
<h1>searching + downloading satellite data using earthaccess<a class="headerlink" href="#searching-downloading-satellite-data-using-earthaccess" title="Permalink to this heading">#</a></h1>
<section id="getting-started">
<h2>getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<p>The other thing you’ll need to do before starting this week’s practical is install a new python package,
<strong>earthaccess</strong>, into our <strong>conda</strong> environment.</p>
<p>First, open up <strong>Anaconda Navigator</strong>. Make sure to switch to your <code class="docutils literal notranslate"><span class="pre">egm722</span></code> environment, then click on the
<strong>Environments</strong> tab:</p>
<a class="reference internal image-reference" href="../../../_images/environments.png"><img alt="the &quot;environments&quot; tab in Anaconda Navigator, opened on the egm722 environment" class="align-center" src="../../../_images/environments.png" style="width: 720px;" /></a>
<p><br /> Change the list from <strong>Installed</strong> to <strong>Not installed</strong>, then type <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> into the <strong>Search</strong> bar in the
upper right-hand corner:</p>
<a class="reference internal image-reference" href="../../../_images/package_search.png"><img alt="the &quot;environments&quot; tab in Anaconda Navigator, showing all packages that match 'earthaccess'" class="align-center" src="../../../_images/package_search.png" style="width: 720px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If nothing shows up here, don’t panic:</p>
<a class="reference internal image-reference" href="../../../_images/blank_search.png"><img alt="the &quot;environments&quot; tab in Anaconda Navigator, showing all packages that match 'earthaccess'" class="align-center" src="../../../_images/blank_search.png" style="width: 600px;" /></a>
<p>It just means we need to add the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel to the list of <strong>Channels</strong>.</p>
<p>To do this, first click the <strong>Channels</strong> button, then type <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>:</p>
<a class="reference internal image-reference" href="../../../_images/add_channel.png"><img alt="adding a new channel called &quot;conda-forge&quot; to the list of channels" class="align-center" src="../../../_images/add_channel.png" style="width: 300px;" /></a>
<p>Press <strong>Enter</strong>, and you should see the new channel added to the list:</p>
<a class="reference internal image-reference" href="../../../_images/channels_added.png"><img alt="the new channel added to the list of channels" class="align-center" src="../../../_images/channels_added.png" style="width: 300px;" /></a>
<p>Click <strong>Update channels</strong>. Once the channel list finishes refreshing, you should see the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> package
in the list of available packages.</p>
</div>
<p>Click the box next to <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> to select it, then click <strong>Apply</strong> in the lower right-hand corner:</p>
<a class="reference internal image-reference" href="../../../_images/package_select.png"><img alt="the &quot;environments&quot; tab in Anaconda Navigator, with the 'earthaccess' package selected" class="align-center" src="../../../_images/package_select.png" style="width: 720px;" /></a>
<p><br /> You should see the following window open (note that this may take some time):</p>
<a class="reference internal image-reference" href="../../../_images/package_install.png"><img alt="the list of new packages to add to the environment" class="align-center" src="../../../_images/package_install.png" style="width: 300px;" /></a>
<p><br /> Click <strong>Apply</strong>, and the packages will be downloaded/installed in the environment. While you wait for <strong>Anaconda</strong>
to finish working, you will be able to move on to the next steps.</p>
<p>Alternatively, go and grab a coffee or tea, and move on to the next steps.</p>
</section>
<section id="the-netrc-file">
<h2>the .netrc file<a class="headerlink" href="#the-netrc-file" title="Permalink to this heading">#</a></h2>
<p>In order to search for and download data using the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> API, we will need to authenticate (log in) using your
NASA EarthData username/password.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you don’t already have a NASA EarthData account, don’t worry. You can go to <a class="reference external" href="https://urs.earthdata.nasa.gov/">https://urs.earthdata.nasa.gov/</a> and
click <strong>Register</strong> (or <strong>Register for a profile</strong>). Follow the steps on the screen, making sure to save your password
using your favorite password manager of choice - you will need it to set up the <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">earthdata.login()</span></code> method (<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/api/api/#earthaccess.api.login">documentation</a>)
uses a few different options for authentication (that is, confirming that you are an authorized user):</p>
<ul class="simple">
<li><p>“<strong>interactive</strong>”: enter your username and password in the interpreter</p></li>
<li><p>“<strong>netrc</strong>”: retrieve your username and password from a <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file.</p></li>
<li><p>“<strong>environment</strong>”: retrieve username and password from <em>environment variables</em> <code class="docutils literal notranslate"><span class="pre">$EARTHDATA_USERNAME</span></code> and <code class="docutils literal notranslate"><span class="pre">$EARTHDATA_PASSWORD</span></code></p></li>
</ul>
<p>This way of authenticating helps avoid typing your username/password into a script or notebook, which is <strong>always</strong>,
<strong>ALWAYS</strong>, a bad idea.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>No, seriously. <strong>NEVER</strong>, <strong>EVER</strong> type your password in plaintext in a script or a jupyter notebook.</p>
</div>
<p>For this exercise, we’ll set up something called a netrc or <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file<a class="footnote-reference brackets" href="#id3" id="id1">1</a>, which <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> can read to
authenticate you with NASA EarthData.</p>
<p>A <a class="reference external" href="https://www.gnu.org/software/inetutils/manual/html_node/The-_002enetrc-file.html">netrc file</a> can be used by a
number of websites and programs for authentication, making it so that you don’t type your password as plaintext in a
script or command prompt.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file is a text file with a simple structure, where each line corresponds to a “machine” or website:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>machine &lt;website&gt; login &lt;username&gt; password &lt;password&gt;
</pre></div>
</div>
<p>To create the file, open <strong>notepad++</strong> (or <strong>notepad</strong>, or your text editor of choice), and enter the following line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>machine urs.earthdata.nasa.gov login &lt;username&gt; password &lt;password&gt;
</pre></div>
</div>
<p>remembering to replace <code class="samp docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code> with your NASA EarthData username, and <code class="samp docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code> with
your NASA EarthData password.</p>
<p>Save the file as <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> to your <strong>Home</strong> directory (on Windows, this should be <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;your_username&gt;</span></code>).
Be sure to select <strong>All Files</strong> for <strong>Save as type</strong>:</p>
<a class="reference internal image-reference" href="../../../_images/saveas_notepad.png"><img alt="the &quot;save as&quot; window for notepad" class="align-center" src="../../../_images/saveas_notepad.png" style="width: 600px;" /></a>
<p><br /> From <strong>notepad++</strong>, you should also uncheck <strong>Append extension</strong>:</p>
<a class="reference internal image-reference" href="../../../_images/saveas_notepadpp.png"><img alt="the &quot;save as&quot; window for notepad++" class="align-center" src="../../../_images/saveas_notepadpp.png" style="width: 600px;" /></a>
<p><br /> We’re not quite done - there’s one last thing we’ll need to do before moving on.</p>
<section id="changing-permissions">
<h3>changing permissions<a class="headerlink" href="#changing-permissions" title="Permalink to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On MacOS or linux-based systems, enter the following command in a terminal window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">600</span> <span class="o">~/.</span><span class="n">netrc</span>
</pre></div>
</div>
<p>This uses the <code class="docutils literal notranslate"><span class="pre">chmod</span></code> command to change the permissions on the file so that only the <em>owner</em> of the file has
read/write access to the file (for more about <code class="docutils literal notranslate"><span class="pre">chmod</span></code> permissions, see this
<a class="reference external" href="https://en.wikipedia.org/wiki/Chmod">wikipedia entry</a>).</p>
</div>
<p>The last step we want to do in setting up the netrc file is to change the <em>permissions</em> so that other users can’t
access the file. To change the permissions of the file in Windows, first open <strong>Windows Explorer</strong>.</p>
<p>From <strong>Windows Explorer</strong>, right-click on the file and select <strong>Properties</strong>:</p>
<a class="reference internal image-reference" href="../../../_images/properties1.png"><img alt="file properties for the new .netrc file" class="align-center" src="../../../_images/properties1.png" style="width: 300px;" /></a>
<p><br /> Click on the <strong>Security</strong> tab:</p>
<a class="reference internal image-reference" href="../../../_images/security_orig.png"><img alt="security properties for the new .netrc file" class="align-center" src="../../../_images/security_orig.png" style="width: 300px;" /></a>
<p><br /> then click <strong>Advanced</strong>:</p>
<a class="reference internal image-reference" href="../../../_images/advanced_orig.png"><img alt="advanced security settings for the new .netrc file" class="align-center" src="../../../_images/advanced_orig.png" style="width: 600px;" /></a>
<p><br /> Click <strong>Disable inheritance</strong>, then click <strong>Convert inherited permissions into explicit permissions on this object</strong>
in the window that pops up:</p>
<a class="reference internal image-reference" href="../../../_images/block_inheritance.png"><img alt="a dialogue asking what to do with the current inherited permissions for the .netrc file" class="align-center" src="../../../_images/block_inheritance.png" style="width: 400px;" /></a>
<p><br /> Now click <strong>Apply</strong>. Next, remove all of the rows from the table that aren’t your user name (this should be
<strong>SYSTEM</strong> and <strong>Administrators</strong>):</p>
<a class="reference internal image-reference" href="../../../_images/advanced_end.png"><img alt="advanced security settings for the new .netrc file, with only the user permissions set" class="align-center" src="../../../_images/advanced_end.png" style="width: 600px;" /></a>
<p><br /> Click <strong>Apply</strong>, then highlight your username and click <strong>Edit</strong>. In the window that opens up, uncheck
<strong>Full control</strong>, but make sure that the other 4 available boxes are checked:</p>
<a class="reference internal image-reference" href="../../../_images/permissions_edited.png"><img alt="the user permissions set so that the file owner can modify, read &amp; execute, read, and write to the file." class="align-center" src="../../../_images/permissions_edited.png" style="width: 600px;" /></a>
<p><br /> Click <strong>OK</strong>, then <strong>OK</strong> again to close the advanced security settings. You should see the permissions for the
file have changed:</p>
<a class="reference internal image-reference" href="../../../_images/security_final.png"><img alt="file properties for the new .netrc file, updated so that only the file owner has access" class="align-center" src="../../../_images/security_final.png" style="width: 300px;" /></a>
<p><br /> That’s it - you should now be able to work through the notebook (assuming that you have correctly entered your
credentials in the <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file, that is).</p>
<p>At this point, you can launch Jupyter Notebooks from the command prompt, or from Anaconda Navigator, and begin to work
through the exercise.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Below this point is the <strong>non-interactive</strong> text of the notebook. To actually run the notebook, you’ll need to
follow the instructions above to open the notebook and run it on your own computer!</p>
</div>
</section>
</section>
<section id="gena-rowlands">
<h2>Gena Rowlands<a class="headerlink" href="#gena-rowlands" title="Permalink to this heading">#</a></h2>
<section id="overview">
<h3>overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h3>
<p>Up to now, you have gained some experience working with basic features
of python, used cartopy and matplotlib to create a map, explored using
shapely and geopandas to work with vector data, and explored using
rasterio and numpy to work with raster data.</p>
<p>In this exercise, we’ll see how we can use an application programming
interface (API) to query and download satellite data from <a class="reference external" href="https://www.earthdata.nasa.gov/">NASA
EarthData</a>, using the
<a class="reference external" href="https://earthaccess.readthedocs.io/">earthaccess</a> API. As part of
this, we’ll also introduce a few more geometric operations using
<code class="docutils literal notranslate"><span class="pre">shapely</span></code> that you may find useful.</p>
</section>
<section id="objectives">
<h3>objectives<a class="headerlink" href="#objectives" title="Permalink to this heading">#</a></h3>
<p>In this example, you will:</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">shapely</span></code> to get the <em>unary union</em> of a collection of shapes</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">shapely</span></code> to find the minimum rotated bounding rectangle of a
geometry</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> API to search for satellite images</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> API to download images</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> to mosaic images together into a single dataset</p></li>
</ul>
</section>
<section id="data-provided">
<h3>data provided<a class="headerlink" href="#data-provided" title="Permalink to this heading">#</a></h3>
<p>In this example, we will be using the <code class="docutils literal notranslate"><span class="pre">Counties</span></code> shapefile that we
used in Week 2.</p>
</section>
<section id="id2">
<h3>getting started<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<p>To get started, run the following cell to import the packages that we’ll
use in the practical.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">earthaccess</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">rasterio</span> <span class="k">as</span> <span class="nn">rio</span>
<span class="kn">import</span> <span class="nn">rasterio.merge</span>
<span class="kn">import</span> <span class="nn">shapely</span>
</pre></div>
</div>
</section>
<section id="preparing-a-search-area">
<h3>preparing a search area<a class="headerlink" href="#preparing-a-search-area" title="Permalink to this heading">#</a></h3>
<p>Before we get to using the API to search for images, we’ll see how we
can use existing data, like the <code class="docutils literal notranslate"><span class="pre">Counties</span></code> shapefile we used in Week
2, to help us search for images.</p>
<p>We won’t be able to use particularly complicated shapes, but we can use
a combination of GIS/geometric operations to get a simple outline of our
data, which can be used for the search, and to help filter and refine
our search results.</p>
<p>First, we’ll load the data using <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>, making sure to transform
from the original CRS to WGS84 latitude/longitude (<code class="docutils literal notranslate"><span class="pre">epsg=4326</span></code>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">counties</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;../Week2/data_files/Counties.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we’ll use <code class="docutils literal notranslate"><span class="pre">.union_all()</span></code> attribute
(<a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.union_all.html">documentation</a>)
to get a combination of all of the County outlines in a single geometry
feature:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gets a single polygon (or multipolygon) composed of the individual geometries in the dataset</span>
<span class="n">outline</span> <span class="o">=</span> <span class="n">counties</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">union_all</span><span class="p">()</span>

<span class="n">outline</span> <span class="c1"># note that in a jupyter notebook, this actually displays the polygon.</span>
</pre></div>
</div>
<p>In the output of the cell above, we can see that the <code class="docutils literal notranslate"><span class="pre">outline</span></code> shape
is indeed the combination of all of the individual county outlines - it
looks like the outline of Northern Ireland that we also used in the Week
2 practical. We can’t use this directly in our NASA EarthData query -
for one thing, this polygon is far too complicated for the kind of query
that we perform using the API.</p>
<p>If we look at the documentation for <code class="docutils literal notranslate"><span class="pre">earthaccess.search_data</span></code>, we see
that we can pass a <em>bounding box</em> argument, in the form of a <strong>tuple</strong>
corresponding to the lower left longitude (minimum x), lower left
latitude (minimum y), upper right longitude (maximum x), and upper right
latitude (maximum y) values:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">earthaccess</span><span class="o">.</span><span class="n">search_data</span><span class="p">)</span>
</pre></div>
</div>
<p>To get these values from our outlines, we can use the <code class="docutils literal notranslate"><span class="pre">.bounds</span></code>
attribute of our <strong>Polygon</strong>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outline</span><span class="o">.</span><span class="n">bounds</span> <span class="c1"># get the min x, min y, max x, max y values of the polygon</span>
</pre></div>
</div>
<p>However, we can also pass a <code class="docutils literal notranslate"><span class="pre">polygon</span></code> argument. Rather than pass the
outline (a very complicated geometric object), though, we’ll look at one
additional attribute of a <code class="docutils literal notranslate"><span class="pre">shapely</span></code> <strong>Polygon</strong> that we can use to get
a bounding box of the geometry - the <code class="docutils literal notranslate"><span class="pre">minimum_rotated_rectangle</span></code>
(<a class="reference external" href="https://shapely.readthedocs.io/en/stable/reference/shapely.minimum_rotated_rectangle.html">documentation</a>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gets the minimum rotated rectangle that covers the outline</span>
<span class="n">search_area</span> <span class="o">=</span> <span class="n">outline</span><span class="o">.</span><span class="n">minimum_rotated_rectangle</span>

<span class="n">search_area</span> <span class="c1"># again, in a jupyter notebook, this displays the polygon</span>
</pre></div>
</div>
<p>You can see above that this gives a boundary box of the polygon, but
rather than being a simple rectangle made of the maximum/minimum
coordinates, it’s rotated to be as small as possible while still
covering the entire geometry. This way, we minimize the area outside of
the area of interest (Northern Ireland) within our search area, while
still making sure to cover the entire area of interest.</p>
<p>The API that <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> uses requires that the <strong>Polygon</strong> be
oriented counter-clockwise. To do this, we can use
<code class="docutils literal notranslate"><span class="pre">shapely.geometry.polygon.orient()</span></code>
(<a class="reference external" href="https://shapely.readthedocs.io/en/stable/manual.html#shapely.geometry.polygon.orient">documentation</a>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_area</span> <span class="o">=</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">orient</span><span class="p">(</span><span class="n">search_area</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># a sign of 1 means oriented counter-clockwise</span>

<span class="n">search_area</span> <span class="c1"># this doesn&#39;t actually change the geometry, just the order of the vertices</span>
</pre></div>
</div>
<p>That’s all we need to be able to search for images that intersect with a
given geometry. Once we have this, we can connect to the API and start
the search.</p>
</section>
<section id="searching-the-archive-for-images">
<h3>searching the archive for images<a class="headerlink" href="#searching-the-archive-for-images" title="Permalink to this heading">#</a></h3>
<section id="connecting-to-the-api">
<h4>connecting to the api<a class="headerlink" href="#connecting-to-the-api" title="Permalink to this heading">#</a></h4>
<p>To connect to the API, we first call <code class="docutils literal notranslate"><span class="pre">earthaccess.login()</span></code>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/api/api/#earthaccess.api.login">documentation</a>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">earthaccess</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;netrc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>From the API reference for <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> linked above, we can see that
we have a few ways of connecting. By default, it tries all of them
(<code class="docutils literal notranslate"><span class="pre">strategy='all'</span></code>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'all'</span></code> - try all methods until one works</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'interactive'</span></code> - enter username and password</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'netrc'</span></code> - retrieve username and password from <code class="docutils literal notranslate"><span class="pre">~/.netrc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'environment'</span></code> - retrieve username and password from
<code class="docutils literal notranslate"><span class="pre">$EARTHDATA_USERNAME</span></code> and <code class="docutils literal notranslate"><span class="pre">$EARTHDATA_PASSWORD</span></code></p></li>
</ul>
<p>Because we have already set up a <code class="docutils literal notranslate"><span class="pre">~/.netrc</span></code> file with our EarthData
username and password, we can just specify <code class="docutils literal notranslate"><span class="pre">strategy='netrc'</span></code>, though
leaving this with the default <code class="docutils literal notranslate"><span class="pre">'all'</span></code> should also work.</p>
<p>If there are no error messages or warnings, the connection was
successfully created, and we can move on to searching for datasets.</p>
</section>
<section id="searching-for-datasets">
<h4>searching for datasets<a class="headerlink" href="#searching-for-datasets" title="Permalink to this heading">#</a></h4>
<p>Next, we’ll see how we can use <code class="docutils literal notranslate"><span class="pre">earthaccess.search_datasets()</span></code>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/api/api/#earthaccess.api.search_datasets">documentation</a>)
to see what datasets are available that match our search. For example,
let’s say that we wanted to search for data that intersect with Northern
Ireland and have to do with elevation - we can use <code class="docutils literal notranslate"><span class="pre">'elevation'</span></code> as a
<code class="docutils literal notranslate"><span class="pre">keyword</span></code>, then pass <code class="docutils literal notranslate"><span class="pre">search_area.exterior.coords</span></code> (the list of
coordinates that describe the exterior of the polygon) as the
<code class="docutils literal notranslate"><span class="pre">polygon</span></code> argument:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">search_datasets</span><span class="p">(</span>
    <span class="n">keyword</span><span class="o">=</span><span class="s1">&#39;elevation&#39;</span><span class="p">,</span> <span class="c1"># search for datasets that match the keyword &#39;elevation&#39;</span>
    <span class="n">polygon</span><span class="o">=</span><span class="n">search_area</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span> <span class="c1"># search for datasets that intersect Northern Ireland</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Hopefully, you can see that there are 501 (!) datasets that fit the
“elevation” keyword that we used to search from. Note that we are not
limited to a single keyword - for example, we could also specify that we
want elevation datasets derived from ASTER:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">search_datasets</span><span class="p">(</span>
    <span class="n">keyword</span><span class="o">=</span><span class="s1">&#39;aster elevation&#39;</span><span class="p">,</span> <span class="c1"># search for datasets that match the keyword &#39;aster elevation&#39;</span>
    <span class="n">polygon</span><span class="o">=</span><span class="n">search_area</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span> <span class="c1"># search for datasets that intersect Northern Ireland</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Each of the datasets included in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> <strong>list</strong> returned by
<code class="docutils literal notranslate"><span class="pre">earthaccess.search_datasets()</span></code> is a <strong>DataCollection</strong>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/collections/collections/#earthaccess.results.DataCollection">documentation</a>),
a <strong>dict</strong>-like object that contains information about the dataset,
including metadata specified by the unified metadata model (UMM).</p>
<p>To get a particular metadata field, we can use
<code class="docutils literal notranslate"><span class="pre">DataCollection.get_umm()</span></code>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/collections/collections/#earthaccess.results.DataCollection.get_umm">documentation</a>).
For example, to get the full name of the dataset (the “<a class="reference external" href="https://cmr.earthdata.nasa.gov/search/site/docs/search/api.html#c-entry-title">entry
title</a>”):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># get the first result</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">get_umm</span><span class="p">(</span><span class="s1">&#39;EntryTitle&#39;</span><span class="p">)</span> <span class="c1"># fill this in with the metadata field that you want</span>
</pre></div>
</div>
<p>As you can see above, the first entry returned by our dataset query is
the <a class="reference external" href="https://doi.org/10.5067/ASTER/ASTGTM.003">ASTER Global Digital Elevation Model, version
3</a>, or ASTER GDEM v3.</p>
<p>If we want to search for the granules associated with this dataset, it
helps to know at least one of the following: - the “short name” of the
dataset (<code class="docutils literal notranslate"><span class="pre">'ShortName'</span></code>) - the direct object identifier of the dataset
(<code class="docutils literal notranslate"><span class="pre">'DOI'</span></code>) - the full name of the dataset (<code class="docutils literal notranslate"><span class="pre">'EntryTitle'</span></code>)</p>
<p>If we don’t include at least one of these in our granule search, we will
likely receive an error - NASA CMR does not permit searches across all
collections (datasets) in order to provide fast responses. In the cell
below, add the correct argument to <code class="docutils literal notranslate"><span class="pre">.get_umm()</span></code> to get the short name
of the dataset to use in the next section:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_name</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_umm</span><span class="p">()</span> <span class="c1"># fill in the following with the correct field name to return the short name of the dataset</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dataset short name: </span><span class="si">{</span><span class="n">ds_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="searching-for-granules">
<h4>searching for granules<a class="headerlink" href="#searching-for-granules" title="Permalink to this heading">#</a></h4>
<p>As we saw earlier, the method we’ll use is <code class="docutils literal notranslate"><span class="pre">earthaccess.search_data()</span></code>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/api/api/#earthaccess.api.search_data">documentation</a>),
to search datasets using <a class="reference external" href="https://cmr.earthdata.nasa.gov/search/site/docs/search/api.html">NASA’s CMR (“Common Metadata Repository”)
API</a>.</p>
<p>For this example, we’ll use the following arguments for the search:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">short_name</span></code>: the dataset short name. For a full list of available
datasets, check the LPDAAC <a class="reference external" href="https://lpdaac.usgs.gov/product_search/">Data
Catalog</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">polygon</span></code>: a list of (lon, lat) tuples to use for spatial filtering</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: the maximum number of search results to return</p></li>
</ul>
<p>To see what additional arguments are available, you can check the
<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/granules/granules-query/">GranuleQuery</a>
API reference for additional keywords to use, based on the listed
methods for the <strong>GranuleQuery</strong> class.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">search_data</span><span class="p">(</span>
    <span class="n">short_name</span><span class="o">=</span><span class="n">ds_name</span><span class="p">,</span> <span class="c1"># search for ASTER GDEM v3 granules</span>
    <span class="n">polygon</span><span class="o">=</span><span class="n">search_area</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="c1"># search for images that intersect our search_area</span>
    <span class="n">count</span><span class="o">=</span><span class="mi">10</span> <span class="c1"># only show the first 10 results</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The output of <code class="docutils literal notranslate"><span class="pre">earthaccess.search_data()</span></code> is a <strong>list</strong> of
<strong>DataGranule</strong> objects that describe each of the images that match our
criteria. You should see that <code class="docutils literal notranslate"><span class="pre">.search_data()</span></code> tells us the total
number of Granules found (8). To see how many granules we have in
<code class="docutils literal notranslate"><span class="pre">results</span></code>, remember that we can also use <code class="docutils literal notranslate"><span class="pre">len()</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="c1"># show the length of the results list</span>
</pre></div>
</div>
<p>You should hopefully see that the search has returned 8 results.</p>
<p>To look at the first one returned, we can use the built-ins <code class="docutils literal notranslate"><span class="pre">next()</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/functions.html#next">documentation</a>)
and <code class="docutils literal notranslate"><span class="pre">iter()</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/functions.html#iter">documentation</a>),
which returns the first item that was entered into the <strong>list</strong> (we can
also just use the index, as we have seen previously):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">granule</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">results</span><span class="p">))</span> <span class="c1"># get the &quot;first&quot; item from the list</span>
<span class="n">granule</span> <span class="c1"># show the first item</span>
</pre></div>
</div>
<p>Here, we can see that just like how <code class="docutils literal notranslate"><span class="pre">shapely</span></code> geometry objects are
displayed as shapes inside the notebook, <strong>DataGranule</strong> objects show
some information about the granule: the available data bands (if the
data is cloud-hosted), the size of the dataset, and even the browse
image (if available). If you click on the image in the output above, it
will open the full-size browse image in a new tab in your browser, so
you can see the image. You can also click on any of the links to the
individual bands, and (after signing in), you can download them directly
from the link.</p>
</section>
</section>
<section id="downloading-granules">
<h3>downloading granules<a class="headerlink" href="#downloading-granules" title="Permalink to this heading">#</a></h3>
<p>Rather than having to click on each link, however, we can use
<code class="docutils literal notranslate"><span class="pre">earthaccess.download()</span></code>
(<a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/user-reference/api/api/#earthaccess.api.download">documentation</a>)
to download everything for us in an automated way.</p>
<p>First, though, we’ll create a directory to save the files to.
<code class="docutils literal notranslate"><span class="pre">earthaccess.download()</span></code> creates the directory if it doesn’t already
exist; however, we’ll create a directory using <code class="docutils literal notranslate"><span class="pre">os.makedirs()</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/os.html#os.makedirs">documentation</a>)
anyway as a reminder of how to do it.</p>
<p>To avoid a <code class="docutils literal notranslate"><span class="pre">FileExistsError</span></code> from being raised if the directory
already exists, we use the <code class="docutils literal notranslate"><span class="pre">exist_ok=True</span></code> argument:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">ds_name</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># create a new folder to download the granules to</span>
</pre></div>
</div>
<p>Now that we have created a folder to save our data to, we can use
<code class="docutils literal notranslate"><span class="pre">earthaccess.download()</span></code> . To help speed things up, <code class="docutils literal notranslate"><span class="pre">.download()</span></code>
downloads files in parallel, with the number set using the <code class="docutils literal notranslate"><span class="pre">threads</span></code>
argument (by default, <code class="docutils literal notranslate"><span class="pre">threads=8</span></code>).</p>
<p>When you run the cell below, you should see two progress bars - one
telling us how many tasks are queued (should be 16, one for each
granule), and a second telling us the progress (this will change as
files are downloaded). Once the files are finished downloading, you
should see a third progress bar telling you the progress of collecting
the downloaded results.</p>
<p><code class="docutils literal notranslate"><span class="pre">earthaccess.download()</span></code> returns a <strong>list</strong> of the filenames that were
downloaded - we’ll use this in the next section to mosaic the DEM tiles
together into a single file.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">downloaded_files</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">ds_name</span><span class="p">)</span> <span class="c1"># download each of the granules to the aster_gdem directory</span>
</pre></div>
</div>
<p>Note that if the files have already been downloaded,
<code class="docutils literal notranslate"><span class="pre">earthaccess.download()</span></code> will not try to download them again.</p>
<p>Finally, each ASTER GDEM granule comes with two files:
<code class="docutils literal notranslate"><span class="pre">{tile}_num.tif</span></code> (telling us the number of scenes that were used to
create the tile) and <code class="docutils literal notranslate"><span class="pre">{tile}_dem.tif</span></code> (the actual elevation data). We
are only interested in the DEM files, so we can use list comprehension
to filter our list of filenames to return only the files that match
<code class="docutils literal notranslate"><span class="pre">*dem.tif</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dem_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">fn</span> <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">downloaded_files</span> <span class="k">if</span> <span class="s1">&#39;dem.tif&#39;</span> <span class="ow">in</span> <span class="n">fn</span><span class="p">]</span> <span class="c1"># use list comprehension to select only filenames that match &#39;*dem.tif&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dem_files</span><span class="p">)</span> <span class="c1"># confirm that this has worked</span>
</pre></div>
</div>
</section>
<section id="using-rasterio-to-mosaic-tiles">
<h3>using rasterio to mosaic tiles<a class="headerlink" href="#using-rasterio-to-mosaic-tiles" title="Permalink to this heading">#</a></h3>
<p>Now that we have our files downloaded, and we have a list of the
individual DEM granules, we can use <code class="docutils literal notranslate"><span class="pre">rasterio.merge.merge()</span></code>
(<a class="reference external" href="https://rasterio.readthedocs.io/en/latest/api/rasterio.merge.html#rasterio.merge.merge">documentation</a>)
to mosaic the individual granules into a single raster that covers the
whole of Northern Ireland, and visualize the results.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rio</span><span class="o">.</span><span class="n">merge</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dem_files</span><span class="p">,</span> <span class="n">dst_path</span><span class="o">=</span><span class="s1">&#39;ASTDTM_Mosaic.tif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, let’s use <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> to plot the mosaicked DEM on a map. First,
we’ll import <code class="docutils literal notranslate"><span class="pre">cartopy.crs</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code>, then use
<code class="docutils literal notranslate"><span class="pre">rio.open()</span></code> to load the DEM:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">with</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;ASTDTM_Mosaic.tif&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">dem</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">crs</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">crs</span>
    <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span>
</pre></div>
</div>
<p>The cell below should be mostly familiar - we first use
<code class="docutils literal notranslate"><span class="pre">plt.subplots()</span></code> to create a new <strong>Figure</strong> object with a single
<strong>Axes</strong>, using the Irish Transverse Mercator projection (EPSG:2157).</p>
<p>Next, we use <code class="docutils literal notranslate"><span class="pre">ax.imshow()</span></code> to display the image, using
<code class="docutils literal notranslate"><span class="pre">ccrs.PlateCarree()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/projections.html#platecarree">documentation</a>)
as the transform (this corresponds to a projected coordinate system
whose easting and northing coordinates correspond to
latitude/longitude).</p>
<p>To confirm that our DEM is displayed in the correct location, we can
also use <code class="docutils literal notranslate"><span class="pre">ax.coastlines()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/generated/cartopy.mpl.geoaxes.GeoAxes.html#cartopy.mpl.geoaxes.GeoAxes.coastlines">documentation</a>)
to add a high-resolution (global) coastline in red.</p>
<p>Finally, we set the map extent to the boundaries of our image
(remembering to include the corresponding CRS). We should see a black
and white elevation map of Northern Ireland (as well as adjacent areas
of the Republic of Ireland and Scotland), with coastlines plotted
overtop the DEM in red:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">epsg</span><span class="p">(</span><span class="mi">2157</span><span class="p">)))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dem</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span> <span class="c1"># display band 0 as a grayscale image, stretched between 0 and 400</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="c1"># plot coastlines on the map</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span> <span class="c1"># set the extent to the image extent</span>
</pre></div>
</div>
<p>And that’s it. You can also confirm that this worked by opening
<strong>ASTDEM_Mosaic.tif</strong> in QGIS or ArcGIS (or by using the techniques we
introduced in the previous exercise…). NASA EarthData is an incredible
resource for earth observation data, with hundreds of freely available
datasets. Using <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code>, you can programmatically search for and
download those data, ensuring that your searches are reproducible and
freeing you up to spend more time analyzing the data.</p>
<p>In combination with tools such as <code class="docutils literal notranslate"><span class="pre">xarray</span></code>
(<a class="reference external" href="https://docs.xarray.dev/en/stable/">documentation</a>), you can even
use <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> to “stream” datasets without even needing to
download them locally. For examples of this, check out some of the
tutorials provided with <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code>, such as <a class="reference external" href="https://earthaccess.readthedocs.io/en/latest/tutorials/SSL/">this
one</a>
that shows how to access sea level rise data in the cloud.</p>
</section>
<section id="exercises-and-next-steps">
<h3>exercises and next steps<a class="headerlink" href="#exercises-and-next-steps" title="Permalink to this heading">#</a></h3>
<p>That’s all for this week’s exercises. For some additional practice:</p>
<ul class="simple">
<li><p>using the documentation for <code class="docutils literal notranslate"><span class="pre">rasterio.merge.merge()</span></code>, along with
your previous work in the module, re-project the mosaicked DEM to
Irish Transverse Mercator with 30 m grid spacing, using bilinear
resampling instead of the default nearest neighbor resampling.</p></li>
<li><p>after mosaicking and reprojecting the DEM, clip the mosaick to the
outline of Northern Ireland, so that elevations outside of the
boundary are set to <code class="docutils literal notranslate"><span class="pre">NoData</span></code>.</p></li>
<li><p>as you have seen, the ASTER GDEM isn’t the only elevation dataset
available from NASA EarthData. Using what you have learned so far, try
downloading a different dataset, such as the SRTM 30m (1 arcsecond)
DEM, or the NASADEM 30m (1 arcsecond) DEM. After downloading and
mosaicking individual granules, try comparing the SRTM and ASTER GDEM
to each other by differencing the two rasters (note that you may first
need to crop the two DEMs so that they have the same extent and pixel
spacing; see one potential
<a class="reference external" href="https://gis.stackexchange.com/questions/367832/using-rasterio-to-crop-image-using-pixel-coordinates-instead-of-geographic-coord">solution</a>
here).</p></li>
</ul>
</section>
</section>
<section id="notes-and-references">
<h2>notes and references<a class="headerlink" href="#notes-and-references" title="Permalink to this heading">#</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>on Windows, some programs may look for a <code class="docutils literal notranslate"><span class="pre">_netrc</span></code> file in your <strong>Home</strong> directory, rather than <code class="docutils literal notranslate"><span class="pre">.netrc</span></code>.</p>
</dd>
</dl>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="raster.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">raster data using rasterio</p>
      </div>
    </a>
    <a class="right-next"
       href="zonalstats.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">zonal statistics using rasterstats</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-netrc-file">the .netrc file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-permissions">changing permissions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gena-rowlands">Gena Rowlands</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-provided">data provided</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">getting started</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-a-search-area">preparing a search area</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-the-archive-for-images">searching the archive for images</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-to-the-api">connecting to the api</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-datasets">searching for datasets</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-granules">searching for granules</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-granules">downloading granules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-rasterio-to-mosaic-tiles">using rasterio to mosaic tiles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises-and-next-steps">exercises and next steps</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-and-references">notes and references</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bob McNabb
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Bob McNabb. Licensed under Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0).
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>