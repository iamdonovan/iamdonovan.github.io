

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>mapping with cartopy &#8212; space cameras and glaciers</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" href="../../../_static/customstyle.css" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'teaching/egm722/practicals/cartopy';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="conflict resolution (using git)" href="conflicts.html" />
    <link rel="prev" title="debugging exercise" href="debugging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">space cameras and glaciers</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../whataboutbob.html">about me</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">teaching</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm101/index.html">EGM101: skills toolbox</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm101/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm101/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week5.html">computation, summary statistics, and graphing in excel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week6.html">summarizing and graphing data in spss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week7.html">correlation and regression in spss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm101/practicals/week8.html">hypothesis testing using spss</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm101/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm310/index.html">EGM310: introduction to gis and remote sensing</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm310/lectures.html">lectures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../egm310/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm702/index.html">EGM702: photogrammetry and advanced image analysis</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm702/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm702/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/setup.html">software setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week1.html">dem processing using micmac</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week2.html">dem differencing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week3.html">introduction to google earth engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week4.html">change detection in earth engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm702/practicals/week5.html">classification in earth engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm702/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../egm703/index.html">EGM703: advanced active and passive remote sensing</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../egm703/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../egm703/practicals/index.html">practicals</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week1.html">urban heat islands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week2.html">hyperspectral image analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week3.html">SAR image processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week4.html">InSAR Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../egm703/practicals/week5.html">SAR image interpretation and flood mapping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../egm703/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html">EGM722: programming for gis and remote sensing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="../setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/jupyter.html">configuring jupyter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/pycharm.html">pycharm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setup/pip.html">installing packages with pip</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lectures.html">lectures</a></li>
<li class="toctree-l3 current active has-children"><a class="reference internal" href="index.html">practicals</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pythonintro.html">intro to python</a></li>
<li class="toctree-l4"><a class="reference internal" href="debugging.html">debugging exercise</a></li>
<li class="toctree-l4 current active"><a class="current reference internal" href="#">mapping with cartopy</a></li>
<li class="toctree-l4"><a class="reference internal" href="conflicts.html">conflict resolution (using git)</a></li>
<li class="toctree-l4"><a class="reference internal" href="vector.html">vector data using shapely and geopandas</a></li>
<li class="toctree-l4"><a class="reference internal" href="folium.html">interactive maps with folium</a></li>
<li class="toctree-l4"><a class="reference internal" href="raster.html">raster data using rasterio</a></li>
<li class="toctree-l4"><a class="reference internal" href="earthaccess.html">searching + downloading satellite data using earthaccess</a></li>
<li class="toctree-l4"><a class="reference internal" href="zonalstats.html">zonal statistics using rasterstats</a></li>
<li class="toctree-l4"><a class="reference internal" href="geopandas.html">more fun with geopandas</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../faq/index.html">help! something went wrong!</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../faq/git.html">git troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../faq/python.html">python troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../project/index.html">programming project</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/github.html">creating a new github repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/environment.html">environment.yml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../unis/index.html">unis glaciology (AG-325)</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../unis/optical.html">mapping glacier area change</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../unis/dems.html">dem differencing and geodetic mass balance</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../python-programming/index.html">programming skills for phd researchers (using python)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../python-programming/setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/jupyter.html">configuring the jupyterlab terminal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/setup/pycharm.html">pycharm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python-programming/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../python-programming/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/git.html">introduction to version control using git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/project.html">starting a new project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/intro.html">introduction to python using jupyterlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/debugging.html">debugging code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/plotting.html">plotting data using seaborn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/pandas.html">working with pandas dataframes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/stats.html">basic statistical analysis using python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python-programming/exercises/regression.html">linear regression using python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python-programming/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../r-programming/index.html">programming skills for phd researchers (using R)</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../r-programming/setup/index.html">setup</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/github.html">setting up github</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/git.html">installing git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/desktop.html">installing github desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/fork.html">forking the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/clone.html">cloning the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/conda.html">setting up conda/anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/environment.html">setting up a conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/setup/jupyter.html">configuring jupyterlab</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../r-programming/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../r-programming/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/git.html">introduction to version control using git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/project.html">starting a new project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/rintro.html">introduction to <strong>R</strong> using jupyterlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/debugging.html">debugging code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/plotting.html">plotting data using ggplot2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/transform.html">transforming data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/stats.html">basic statistical analysis using <strong>R</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../r-programming/exercises/regression.html">linear regression using <strong>R</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../r-programming/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ml-crash-course/index.html">a crash course in machine learning (using python) – under development</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/setup.html">setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/lectures.html">lectures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../ml-crash-course/exercises/index.html">exercises</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/regression.html">what is machine learning?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/training_testing.html">training, testing, and validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/feature_design.html">feature design and engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ml-crash-course/exercises/performance.html">measuring model performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ml-crash-course/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hpc-intro/index.html">introduction to high performance computing</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hpc-intro/setup.html">setup</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../hpc-intro/shell/index.html">the unix shell</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-24"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/shell.html">in the beginning was the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/navigation.html">navigating on the command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/files.html">working with files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/input.html">input/output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/shell/scripts.html">shell scripts</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../hpc-intro/hpc/index.html">high performance computing</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-25"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/atlas.html">atlas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/data_transfer.html">transferring data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../hpc-intro/hpc/vulcan.html">vulcan</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../hpc-intro/resources.html">additional resources</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../dissertation/index.html">undergraduate dissertation projects</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-26"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/glaciers.html">mapping glacier changes over time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/glacial_lakes.html">detection of supraglacial lakes and timing of drainage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/algae.html">mapping harmful algal blooms using satellite remote sensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/floods.html">flood detection and monitoring using remote sensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/wildfires.html">detection and mapping of wildfires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dissertation/heat_islands.html">urban heat islands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../gee/index.html">google earth engine</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-27"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../gee/tutorials/index.html">gee tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-28"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/getting_started/index.html">getting started</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-29"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/adding_exporting.html">adding and exporting images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/spectral.html">spectral signatures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/image_collections.html">image collections and vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/mapping.html">manual mapping (digitizing)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/band_maths.html">band maths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/getting_started/zonal_stats.html">zonal statistics</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/classification/index.html">image classification</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-30"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/unsupervised.html">unsupervised classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/pixel.html">pixel-based classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/classification/obia.html">object-based classification</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/change_detection/index.html">change detection</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-31"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/visual_analysis.html">visual analysis of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/thresholding.html">band maths and thresholding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/repeat_classification.html">repeat classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/cva.html">change vector analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/change_detection/time_series.html">time series analysis</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/enhancement/index.html">image enhancement</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-32"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/filtering.html">image filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/pansharpening.html">pansharpening</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/edge_detection.html">edge detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/unmixing.html">spectral unmixing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/enhancement/pca.html">principle component analysis</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../gee/tutorials/advanced/index.html">advanced topics</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-33"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../gee/tutorials/advanced/animation.html">creating an animation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../gee/exercises/index.html">sample exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../research/index.html">ongoing and past research projects</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-34"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../research/dar.html">deplete and retreat (DaR)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../writing/index.html">selected writing samples</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-35"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../writing/source.html">source magazine (summer 2022)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../github.html">github projects</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io/edit/main/teaching/egm722/practicals/cartopy.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iamdonovan/iamdonovan.github.io/issues/new?title=Issue%20on%20page%20%2Fteaching/egm722/practicals/cartopy.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/teaching/egm722/practicals/cartopy.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>mapping with cartopy</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#synching-forks">synching forks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#merging-branches">merging branches</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-script">running the script</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ryan-gosling">Ryan Gosling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">getting started</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data">loading the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-coordinate-reference-systems">working with coordinate reference systems</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-data-to-the-map">adding data to the map</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-labels-and-legends">adding labels and legends</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-exercises-and-next-steps">further exercises and next steps</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="mapping-with-cartopy">
<h1>mapping with cartopy<a class="headerlink" href="#mapping-with-cartopy" title="Permalink to this heading">#</a></h1>
<p>In this practical, we’ll create a map using similar data to what you used in the first practical of EGM711. This time,
rather than using ArcGIS Pro, we’ll use <code class="docutils literal notranslate"><span class="pre">cartopy</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>, python packages used for making
maps, plotting data, and working with vector data, respectively.</p>
<p>The practical this week is provided as a Jupyter Notebook, where you can interactively work through the different steps
of plotting the data. There is a second file, <strong>practical2_script.py</strong>, which will create the same map over again. Once
you have worked through the Jupyter Notebook, you can modify the script to complete the second part of the exercise,
and experiment with the different parameters used to make the map.</p>
<section id="getting-started">
<h2>getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<p>To get started with this week’s practical, first head to the your GitHub repository (<code class="samp docutils literal notranslate"><span class="pre">https://github.com/&lt;</span><em><span class="pre">your_username</span></em><span class="pre">&gt;/egm722</span></code>).
You should notice that this repository has 7 branches – you can click on the <strong>branch</strong> button to see all of the branches
available for a particular repository:</p>
<a class="reference internal image-reference" href="../../../_images/github.png"><img alt="the github repository" class="align-center" src="../../../_images/github.png" style="width: 720px;" /></a>
<p><br /> You should be able to see that the available branches are <code class="docutils literal notranslate"><span class="pre">main</span></code>, the default <strong>branch</strong> that we used in last
week’s practical, branches for weeks 2 through 5, and a <code class="docutils literal notranslate"><span class="pre">recipe</span></code> and <code class="docutils literal notranslate"><span class="pre">conflict-recipe</span></code> branch (more on these later).</p>
<p>In <strong>Windows Explorer</strong> (or <strong>Finder</strong>), open up the folder where you’ve <strong>cloned</strong> your repository. You should
currently see just the <strong>Week1</strong> folder - no <strong>Week2</strong>, <strong>Week3</strong>, and so on:</p>
<a class="reference internal image-reference" href="../../../_images/week1_folder.png"><img alt="the repository folder showing only Week 1 materials" class="align-center" src="../../../_images/week1_folder.png" style="width: 600px;" /></a>
<p><br /> We want to be able to work with each of the weeks at the same time, without having to switch branches each time.
To do this, we’ll need to add each week’s folder to the main branch.</p>
<p>Each week, we’ll see how we can <strong>merge</strong>, or integrate, that week’s branch into the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. This week, we’ll
use <strong>GitHub Desktop</strong> to do this. In the coming weeks, we’ll also introduce other options such as the command-line
interface or
<a class="reference external" href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests">Pull Requests</a>.</p>
</section>
<section id="synching-forks">
<h2>synching forks<a class="headerlink" href="#synching-forks" title="Permalink to this heading">#</a></h2>
<p>Before we merge the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch, however, let’s first check that there aren’t any recent changes to the original
repository that we need to include in our fork.</p>
<p>Back on GitHub, switch to the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch by clicking the drop-down menu that currently says <code class="docutils literal notranslate"><span class="pre">main</span></code>:</p>
<a class="reference internal image-reference" href="../../../_images/branch_menu.png"><img alt="the github repository, with the branch menu highlighted in red" class="align-center" src="../../../_images/branch_menu.png" style="width: 720px;" /></a>
<p><br /> and selecting the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch. You should see the page now looks like this:</p>
<a class="reference internal image-reference" href="../../../_images/fork_behind.png"><img alt="the github repository, showing that the week2 branch is behind the upstream repository" class="align-center" src="../../../_images/fork_behind.png" style="width: 720px;" /></a>
<p><br /> If you see the message “This branch is <strong>X</strong> commits behind <code class="docutils literal notranslate"><span class="pre">iamdonovan/egm722:week2</span></code>.”, you will need to sync
the fork so that you incorporate the recent changes to the original repository (<code class="docutils literal notranslate"><span class="pre">iamdonovan/egm722</span></code>).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you see the message “This branch is up to date with <code class="docutils literal notranslate"><span class="pre">iamdonovan/egm722</span></code>.”, you should still read through the
instructions below, just in case you encounter this in the future.</p>
</div>
<p>To sync the fork, first click on <strong>Sync fork</strong>:</p>
<a class="reference internal image-reference" href="../../../_images/sync_fork.png"><img alt="the github repository, with the sync fork menu active" class="align-center" src="../../../_images/sync_fork.png" style="width: 720px;" /></a>
<p><br /> Then click on <strong>Update branch</strong>.</p>
<p>After a moment, you should see that the message changes:</p>
<a class="reference internal image-reference" href="../../../_images/fork_updated.png"><img alt="the github repository, showing that the week2 branch is now up to date" class="align-center" src="../../../_images/fork_updated.png" style="width: 720px;" /></a>
<p><br /> In the coming weeks, we will see other ways that we can check whether there are changes from the upstream
repository that need to be synced. For now, we can continue on to merging these changes into our <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
</section>
<section id="merging-branches">
<h2>merging branches<a class="headerlink" href="#merging-branches" title="Permalink to this heading">#</a></h2>
<p>For now, open up <strong>GitHub Desktop</strong>. You should see something like this:</p>
<a class="reference internal image-reference" href="../../../_images/desktop1.png"><img alt="the github desktop window" class="align-center" src="../../../_images/desktop1.png" style="width: 600px;" /></a>
<p><br /> Before moving on, let’s first make sure to <strong>fetch</strong> any changes from our remote repository. To do this, click on
the <strong>Fetch origin</strong> button:</p>
<a class="reference internal image-reference" href="../../../_images/fetch_origin.png"><img alt="the github desktop window, with the fetch origin button highlighted" class="align-center" src="../../../_images/fetch_origin.png" style="width: 600px;" /></a>
<p><br /> After a few moments, you should see that the wheel icon stops spinning, indicating that your remote changes have
been fetched.</p>
<p>Now, click the button that shows the current branch (<strong>main</strong>) – you should see the following:</p>
<a class="reference internal image-reference" href="../../../_images/desktop_branches.png" id="desktop-branches"><img alt="the github desktop window" class="align-center" id="desktop-branches" src="../../../_images/desktop_branches.png" style="width: 600px;" /></a>
<p><br /> In addition to your <strong>local</strong> <code class="docutils literal notranslate"><span class="pre">main</span></code> branch, you should also see <strong>upstream</strong> versions of each of the branches
(<code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">week2</span></code>–<code class="docutils literal notranslate"><span class="pre">week5</span></code>), as well as <strong>origin</strong> versions.</p>
<p>These are different things, and it’s important to keep track of the differences:</p>
<ul class="simple">
<li><p>The <strong>local</strong> branches are the versions that are stored on <em>your</em> computer, <em>local</em>ly.</p></li>
<li><p>The <strong>origin</strong> branches are the versions stored on <em>your</em> GitHub repository</p></li>
<li><p>The <strong>upstream</strong> branches are the versions that are stored in the repository that you forked from (<a class="github reference external" href="https://github.com/iamdonovan/egm722">iamdonovan/egm722</a>)</p></li>
</ul>
<p>Right now, you should only have the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch on your machine. To work with (<strong>checkout</strong>) the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch,
we need to download it. Select the <strong>origin</strong> <code class="docutils literal notranslate"><span class="pre">week2</span></code> (<code class="docutils literal notranslate"><span class="pre">origin/week2</span></code>) branch, and <strong>GitHub Desktop</strong> will download
the files on the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch to your computer, and switch (<strong>checkout</strong>) the <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch.</p>
<p>You should see that the “Current branch” has changed:</p>
<a class="reference internal image-reference" href="../../../_images/desktop_week2.png"><img alt="the github desktop window" class="align-center" src="../../../_images/desktop_week2.png" style="width: 600px;" /></a>
<p><br /> And, you can see that the contents of your repository folder have changed:</p>
<a class="reference internal image-reference" href="../../../_images/week2_folder.png"><img alt="the repository folder showing only Week 2 materials" class="align-center" src="../../../_images/week2_folder.png" style="width: 600px;" /></a>
<p><br /> Remember - <strong>the files are not gone</strong>. When you switch from one branch to another, <strong>git</strong> changes the files in
the folder to reflect the state of the branch you’re working on. Because there is no <strong>Week1</strong> folder on the <code class="docutils literal notranslate"><span class="pre">week2</span></code>
branch, it’s been temporarily removed. You can verify this by switching branches in <strong>GitHub Desktop</strong> and seeing how
the folder contents change.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Make sure that you’re on the</strong> <code class="docutils literal notranslate"><span class="pre">main</span></code> <strong>branch before continuing</strong>.</p>
<p>As good practice, you should also click the “<strong>Fetch origin</strong>” button before continuing.</p>
<p>There shouldn’t be many changes on the remote repository that aren’t on your local computer, so this won’t make
much of a difference right now. If you’re working collaboratively with others, though, it’s good to make sure that
you’re not missing important changes before merging different branches.</p>
</div>
<p>To <strong>merge</strong> the two branches, click on the <strong>Branch</strong> menu, then select <strong>Merge into current branch…</strong>. In the menu
that opens, select the <strong>local</strong> <code class="docutils literal notranslate"><span class="pre">week2</span></code> branch:</p>
<a class="reference internal image-reference" href="../../../_images/merge_week2.png"><img alt="merging the week2 branch into main using github desktop" class="align-center" src="../../../_images/merge_week2.png" style="width: 600px;" /></a>
<p><br /> You should see that a green checkmark appears, indicating that there aren’t any <strong>conflicts</strong> (files that have
been changed on both branches). The message:</p>
<blockquote>
<div><p>This will merge <strong>2 commits</strong> from <strong>week2</strong> into <strong>main</strong></p>
</div></blockquote>
<p>Tells us the number of commits that will be merged into <code class="docutils literal notranslate"><span class="pre">main</span></code>. Note that you may see a different number of commits
here - as long as you have no conflicts, this isn’t a problem.</p>
<p>Select <strong>Create a merge commit</strong> - this will create a new commit that merges the two branches together. For now, don’t
worry about the other options for merging branches together.</p>
<p>Once you’ve created the merge commit, you should see that <strong>Fetch origin</strong> has changed to <strong>Push origin</strong> - this will
<strong>push</strong> (upload) the changes you’ve made locally to your <strong>GitHub</strong> repository:</p>
<a class="reference internal image-reference" href="../../../_images/desktop_push.png"><img alt="pushing changes from the github desktop window" class="align-center" src="../../../_images/desktop_push.png" style="width: 600px;" /></a>
<p><br /> Once the changes have been pushed, go back to your <strong>GitHub</strong> repository (<code class="samp docutils literal notranslate"><span class="pre">https://github.com/&lt;</span><em><span class="pre">your_username</span></em><span class="pre">&gt;/egm722</span></code>).
You should now see that your <code class="docutils literal notranslate"><span class="pre">main</span></code> branch has both the <strong>Week1</strong> and <strong>Week2</strong> folders:</p>
<a class="reference internal image-reference" href="../../../_images/github_merged.png"><img alt="the github repository showing the merged files" class="align-center" src="../../../_images/github_merged.png" style="width: 720px;" /></a>
<p><br /> You can also confirm the changes in your <strong>local</strong> folder:</p>
<a class="reference internal image-reference" href="../../../_images/merged.png"><img alt="the repository folder showing the merged materials" class="align-center" src="../../../_images/merged.png" style="width: 600px;" /></a>
<p><br /> As a final step, you can “prune” this branch by deleting it. From the <strong>branch</strong> menu, right-click on <code class="docutils literal notranslate"><span class="pre">week2</span></code>
and select <strong>Delete</strong>. You should see a message like the following:</p>
<a class="reference internal image-reference" href="../../../_images/delete_branch.png"><img alt="a message asking you to confirm deleting the selected branch" class="align-center" src="../../../_images/delete_branch.png" style="width: 400px;" /></a>
<p><br /> Check the box next to <strong>Yes, delete this branch on the remote</strong>, then click <strong>Delete</strong> to remove the branch. You
should see that the branch is no longer present in the <strong>branch</strong> menu.</p>
<p>You can also confirm that the branch has been removed from your remote repository by visiting
<code class="docutils literal notranslate"><span class="pre">https://github.com/{username}/egm722/branches/all</span></code>.</p>
<p>At this point, you should be ready to open jupyter and work your way through the Week 2 Notebook, following the
same initial steps as last week.</p>
</section>
<section id="running-the-script">
<h2>running the script<a class="headerlink" href="#running-the-script" title="Permalink to this heading">#</a></h2>
<p>To edit the script (<strong>practical2_script.py</strong>), open it in your IDE. If your IDE has a built-in terminal/python
interpreter, you can also run the script directly from the IDE:</p>
<a class="reference internal image-reference" href="../../../_images/pycharm.png"><img alt="the script open in the pycharm IDE" class="align-center" src="../../../_images/pycharm.png" style="width: 720px;" /></a>
<p><br /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The setup for this using pycharm will be the same as you did for the <a class="reference internal" href="debugging.html"><span class="doc">debugging</span></a> exercise in
week 1.</p>
</div>
<p>Otherwise, you can use the <strong>command prompt</strong>; the procedure will be effectively the same.</p>
<p>Launch the command prompt from <strong>Anaconda Navigator</strong>, taking care to ensure that your <code class="docutils literal notranslate"><span class="pre">egm722</span></code> environment is
selected (rather than the <code class="docutils literal notranslate"><span class="pre">base</span></code> environment). When it launches, you should see the following window:</p>
<a class="reference internal image-reference" href="../../../_images/prompt3.png"><img alt="the conda prompt" class="align-center" src="../../../_images/prompt3.png" style="width: 600px;" /></a>
<p><br /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If, instead of <code class="docutils literal notranslate"><span class="pre">(egm722)</span></code>, you see <code class="docutils literal notranslate"><span class="pre">(base)</span></code> next to the command prompt, you will need to <em>activate</em> the correct
environment by typing:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>egm722
</pre></div>
</div>
<p>and pressing <strong>ENTER</strong>.</p>
</div>
<p>Navigate to the week 2 folder using the <code class="docutils literal notranslate"><span class="pre">cd</span></code> command. You should see the jupyter-notebook file, as well as the script:</p>
<a class="reference internal image-reference" href="../../../_images/week2_dir.png"><img alt="the contents of the week 2 directory in the command prompt" class="align-center" src="../../../_images/week2_dir.png" style="width: 600px;" /></a>
<p><br /> Remember that we can use python in two ways, either interactive or script mode. We also have a choice of two
different interpreters - either <code class="docutils literal notranslate"><span class="pre">python</span></code> (the standard python interpreter) or <code class="docutils literal notranslate"><span class="pre">ipython</span></code> (an enhanced interactive
interpreter).</p>
<p>I recommend using IPython instead of the standard interpreter when using interactive mode – the interpreter highlights
syntax, it keeps track of your sessions and enables you to easily look back over your command history, enables you to
use some shell commands from within the interpreter, and also enables tab completion for commands, variable names,
and filenames.</p>
<p>You can run any script from start to finish using either interpreter by typing <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script.py</span></code> (or
<code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">script.py</span></code>, although the benefits of using IPython come from running python in interactive mode rather than
script mode).</p>
<a class="reference internal image-reference" href="../../../_images/script_run3.png"><img alt="the result of running the script from the command prompt" class="align-center" src="../../../_images/script_run3.png" style="width: 600px;" /></a>
<p><br /> If you want to be able to troubleshoot the script, or run additional commands after the script has finished running,
you can also start the interpreter in interactive mode by typing <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">-i</span> <span class="pre">script.py</span></code>:</p>
<a class="reference internal image-reference" href="../../../_images/ipython_script.png"><img alt="the result of running the script from the command prompt using ipython -i" class="align-center" src="../../../_images/ipython_script.png" style="width: 600px;" /></a>
<p><br /> To show the plot, use <code class="docutils literal notranslate"><span class="pre">plt.show()</span></code>:</p>
<a class="reference internal image-reference" href="../../../_images/plot.png"><img alt="the plot window open from ipython" class="align-center" src="../../../_images/plot.png" style="width: 600px;" /></a>
<p><br /> You can also turn on interactive plotting using <code class="docutils literal notranslate"><span class="pre">plt.ion()</span></code>, which will update the plot each time you run a
plotting command – similar to how it worked in the Jupyter Notebook.</p>
<p>Once you have finished the exercise, you can try adding other features to your map, work on re-creating some of the maps
that you created in EGM711, or try some of the examples shown on the
<a class="reference external" href="https://scitools.org.uk/cartopy/docs/v0.13/matplotlib/intro.html">cartopy website</a>.
Can you work out how to include a basemap to your image, based on some of the examples provided?</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Below this point is the <strong>non-interactive</strong> text of the notebook. To actually run the notebook, you’ll need to
follow the instructions above to open the notebook and run it on your own computer!</p>
</div>
</section>
<hr class="docutils" />
<section id="ryan-gosling">
<h2>Ryan Gosling<a class="headerlink" href="#ryan-gosling" title="Permalink to this heading">#</a></h2>
<p>In the first practical for EGM711, you learned how to use ArcGIS Pro to
make maps, given shapefiles of different features of interest in
Northern Ireland. In this practical, you will repeat the exercise, this
time using <code class="docutils literal notranslate"><span class="pre">cartopy</span></code>, <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>, and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, three python
packages used for making maps, working with vector data, and making
plots, respectively.</p>
<section id="objectives">
<h3>objectives<a class="headerlink" href="#objectives" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>become familiar with <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>, <code class="docutils literal notranslate"><span class="pre">cartopy</span></code>, and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, including
reading the provided documentation</p></li>
<li><p>use <em>list comprehension</em> to simplify some <code class="docutils literal notranslate"><span class="pre">for</span></code> loops</p></li>
</ul>
</section>
<section id="id1">
<h3>getting started<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>First, run the cell below to load the python modules we’ll be using in
the practical:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this lets us use the figures interactively</span>
<span class="o">%</span><span class="k">matplotlib</span> widget

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">cartopy.feature</span> <span class="kn">import</span> <span class="n">ShapelyFeature</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="k">as</span> <span class="nn">mlines</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ion</span><span class="p">()</span> <span class="c1"># make the plotting interactive</span>
</pre></div>
</div>
<p>Let’s also define a few helper functions that we’ll use later on. For
now, don’t worry too much about what each individual line of code does -
we’ll go over these in a bit more depth as we go.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_handles</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">edge</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate matplotlib patch handles to create a legend of each of the features in the map.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    labels : list(str)</span>
<span class="sd">        the text labels of the features to add to the legend</span>

<span class="sd">    colors : list(matplotlib color)</span>
<span class="sd">        the colors used for each of the features included in the map.</span>

<span class="sd">    edge : matplotlib color (default: &#39;k&#39;)</span>
<span class="sd">        the color to use for the edge of the legend patches.</span>

<span class="sd">    alpha : float (default: 1.0)</span>
<span class="sd">        the alpha value to use for the legend patches.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>

<span class="sd">    handles : list(matplotlib.patches.Rectangle)</span>
<span class="sd">        the list of legend patches to pass to ax.legend()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>  <span class="c1"># get the length of the color list</span>
    <span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create an empty list</span>
    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)):</span> <span class="c1"># for each label and color pair that we&#39;re given, make an empty box to pass to our legend</span>
        <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">ii</span> <span class="o">%</span> <span class="n">lc</span><span class="p">],</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">edge</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">handles</span>

<span class="c1"># adapted this question: https://stackoverflow.com/q/32333870</span>
<span class="c1"># answered by SO user Siyh: https://stackoverflow.com/a/35705477</span>
<span class="k">def</span> <span class="nf">scale_bar</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mf">0.92</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a scale bar in a cartopy GeoAxes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    ax : cartopy.mpl.geoaxes.GeoAxes</span>
<span class="sd">        the cartopy GeoAxes to add the scalebar to.</span>

<span class="sd">    length : int, float (default 20)</span>
<span class="sd">        the length of the scalebar, in km</span>

<span class="sd">    location : tuple(float, float) (default (0.92, 0.95))</span>
<span class="sd">        the location of the center right corner of the scalebar, in fractions of the axis.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ax : cartopy.mpl.geoaxes.GeoAxes</span>
<span class="sd">        the cartopy GeoAxes object</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_extent</span><span class="p">()</span> <span class="c1"># get the current extent of the axis</span>
    <span class="n">sbx</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">*</span> <span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># get the right x coordinate of the scale bar</span>
    <span class="n">sby</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">*</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># get the right y coordinate of the scale bar</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">sbx</span><span class="p">,</span> <span class="n">sbx</span><span class="o">-</span><span class="n">length</span><span class="o">*</span><span class="mi">1000</span><span class="p">],</span> <span class="p">[</span><span class="n">sby</span><span class="p">,</span> <span class="n">sby</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="p">)</span> <span class="c1"># plot a thick black line</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">sbx</span><span class="o">-</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="n">sbx</span><span class="o">-</span><span class="n">length</span><span class="o">*</span><span class="mi">1000</span><span class="p">],</span> <span class="p">[</span><span class="n">sby</span><span class="p">,</span> <span class="n">sby</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="p">)</span> <span class="c1"># plot a white line from 0 to halfway</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">sbx</span><span class="p">,</span> <span class="n">sby</span><span class="o">-</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2"> km&quot;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># add a label at the right side</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">sbx</span><span class="o">-</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="n">sby</span><span class="o">-</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> km&quot;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># add a label in the center</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">sbx</span><span class="o">-</span><span class="n">length</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="n">sby</span><span class="o">-</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;0 km&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># add a label at the left side</span>

    <span class="k">return</span> <span class="n">ax</span>
</pre></div>
</div>
<p>Have a look at the <em>docstring</em> attached to each function, which explains
what the function does, and how to use it. Remember that this is the
same information that you would see if you used <code class="docutils literal notranslate"><span class="pre">help()</span></code> on a function
- try it below:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">generate_handles</span><span class="p">)</span> <span class="c1"># show the docstring for the generate_handles function</span>
</pre></div>
</div>
<p>Remember that as you work your way through this (and other) practical
exercises, there are a number of ways that you can use to find help if
you get stuck:</p>
<ol class="arabic simple">
<li><p>the built-in help (i.e., <code class="docutils literal notranslate"><span class="pre">help(plt.text)</span></code>)</p></li>
<li><p>using ipython’s (the python interpreter used by jupyter-notebooks)
help shortcut (i.e., <code class="docutils literal notranslate"><span class="pre">plt.text?</span></code>)</p></li>
<li><p>finding the online documentation for the module (usually achieved via
option 4)</p></li>
<li><p>searching google (or your search engine of choice)</p></li>
<li><p>consulting your favorite medicine man/shaman/spiritual guide</p></li>
<li><p>asking the instructor, who will in all likelihood resort to one of
the other options (usually 5 or 4).</p></li>
</ol>
</section>
<section id="loading-the-data">
<h3>loading the data<a class="headerlink" href="#loading-the-data" title="Permalink to this heading">#</a></h3>
<p>Now that we’ve imported most of the modules we’ll be needing, and
defined a few helper functions, we can actually load our data. To load
the shapefile data, we will use <a class="reference external" href="http://geopandas.org/">GeoPandas</a>,
an open-source package designed to make working with geospatial data in
python easier.</p>
<p>GeoPandas is built off of Pandas, a powerful data analysis tool. We will
be working with both of these packages more in the weeks to come.</p>
<p>To open a shapefile, we use the <code class="docutils literal notranslate"><span class="pre">gpd.read_file()</span></code>
(<a class="reference external" href="https://geopandas.org/en/stable/docs/reference/api/geopandas.read_file.html">documentation</a>)
method:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outline</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;data_files/NI_outline.shp&#39;</span><span class="p">))</span>
<span class="n">towns</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;data_files/Towns.shp&#39;</span><span class="p">))</span>
<span class="n">water</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;data_files/Water.shp&#39;</span><span class="p">))</span>
<span class="n">rivers</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;data_files/Rivers.shp&#39;</span><span class="p">))</span>
<span class="n">counties</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;data_files/Counties.shp&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>GeoPandas loads the data associated with a shapefile into a
GeoDataFrame, a tabular data structure that always has a column
describing a feature’s geometry. As we saw in last week’s exercise, each
line in the table corresponds to a feature in the shapefile, just like
the attribute table you are familiar with from ArcGIS/QGIS.</p>
<p>To see a subset of a GeoDataFrame, we can use the <code class="docutils literal notranslate"><span class="pre">head()</span></code>
(<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.head.html">documentation</a>)
method:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>To select rows in the dataframe using an index, we can use <code class="docutils literal notranslate"><span class="pre">.loc</span></code>
(<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html">documentation</a>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># should show the row for Lough Neagh</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">.loc</span></code> is not a method, since we use square brackets:<code class="docutils literal notranslate"><span class="pre">[</span></code>
and <code class="docutils literal notranslate"><span class="pre">]</span></code>, instead of round brackets/parentheses. Instead, it’s an
attribute that provides a way to index or slice a GeoDataFrame.</p>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> with <strong>conditional statements</strong>. For example,
if we wanted to select all bodies of water that are smaller than 1
square kilometer, we could use something like this:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">water</span><span class="p">[</span><span class="s1">&#39;Area_km2&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that with only a single value, <code class="docutils literal notranslate"><span class="pre">.loc</span></code> returns all columns of the
GeoDataFrame where the rows match the given index/conditional statement.</p>
<p>To select a specific column or group of columns, we can use a comma to
separate the different indexers. For example, if we want to select only
the name of the lakes that are smaller than 1 square kilometer, we can
use the following:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">water</span><span class="p">[</span><span class="s1">&#39;Area_km2&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;namespace&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Each “column” of the GeoDataFrame is an object of type <strong>Series</strong>
(<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html">documentation</a>).</p>
<p>If a <strong>Series</strong> is filled with numeric data, we can use different
methods such as <code class="docutils literal notranslate"><span class="pre">.sum()</span></code>
(<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.sum.html">documentation</a>)
or <code class="docutils literal notranslate"><span class="pre">.mean()</span></code>
(<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.mean.html">documentation</a>),
to get the sum and mean of the values in the <strong>Series</strong>, respectively.
So, the total area (in square kilometers) of all of the lakes in the
dataset would be given by the following statement:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="p">[</span><span class="s1">&#39;Area_km2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<p>We’ll work with GeoDataFrames more in next week’s practical, but for now
see if you can put these different pieces together and figure out the
total area of lakes in the <code class="docutils literal notranslate"><span class="pre">Water</span></code> dataset that are smaller than 10
square kilometers. I’ll provide a few reminder hints to get you started:</p>
<ol class="arabic simple">
<li><p><strong>GeoDataFrame</strong>s can be subset using both a conditional and a
column in the <strong>GeoDataFrame</strong>, like we saw above.</p></li>
<li><p>With only a single value, <code class="docutils literal notranslate"><span class="pre">.loc</span></code> returns all columns of the
GeoDataFrame where the rows match the given index/slice/conditional
statement. To select a specific column or group of columns, we can
use a comma to separate the different indexers.</p></li>
<li><p>The numerical columns of a GeoDataFrame (also called Series or
GeoSeries) have built-in operators such as <strong>max</strong>, <strong>min</strong>,
<strong>mean</strong>, and so on.</p></li>
</ol>
<p>That should be enough to get you started - if you get stuck, be sure to
ask for help.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># write a statement (or series of statments) to calculate the total area of lakes &lt; 10 km2 in the water dataset.</span>
</pre></div>
</div>
</section>
<section id="working-with-coordinate-reference-systems">
<h3>working with coordinate reference systems<a class="headerlink" href="#working-with-coordinate-reference-systems" title="Permalink to this heading">#</a></h3>
<p>Now that we’re more familiar with the dataset, we can start building our
map. For this portion of the practical, we’ll be mostly using
<a class="reference external" href="https://matplotlib.org/">matplotlib</a>, a python package designed for
making plots and graphs, and
<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/">cartopy</a>, a package
designed for making maps and representing geopatial data.</p>
<p>First, let’s look at the coordinate reference system (CRS) for
<code class="docutils literal notranslate"><span class="pre">outline</span></code>, the outline of Northern Ireland:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outline</span><span class="o">.</span><span class="n">crs</span> <span class="c1"># show the CRS of the outline dataset</span>
</pre></div>
</div>
<p>Here, we can see that the outline is in UTM coordinates (WGS84 UTM Zone
29N, to be exact). Now, let’s look at the CRS for <code class="docutils literal notranslate"><span class="pre">water</span></code>,
corresponding to the lake outlines:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">water</span><span class="o">.</span><span class="n">crs</span> <span class="c1"># show the CRS of the water dataset</span>
</pre></div>
</div>
<p>Here, we can see the CRS is different - the coordinates of <code class="docutils literal notranslate"><span class="pre">water</span></code> are
in Irish Transverse Mercator, which are similar to, but not quite the
same as, WGS84 UTM Zone 29N easting/northing coordinates.</p>
<p>To correctly plot our geospatial data, then, we need to have some way
for <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to “translate” and plot the
coordinates stored within the shapefile data - this way, even if our
data are represented in different coordinates (e.g., WGS84 UTM Zone 29N
or Irish Transverse Mecractor), they will show up in the correct places
on the map.</p>
<p>To do this, we need to create a <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> <strong>CRS</strong>, a representation of
the spatial reference system that we will use to plot our data inside of
our map. Here, we’re using <code class="docutils literal notranslate"><span class="pre">ccrs.UTM()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/projections.html#utm">documentation</a>)
to create a CRS corresponding to the Universal Transverse Mercator (UTM)
Zone that Northern Ireland is part of. In order for this line to work,
you will need to replace <code class="docutils literal notranslate"><span class="pre">XX</span></code> with the correct number for the UTM Zone
that Northern Ireland is part of - if you’re not sure, <a class="reference external" href="https://mangomap.com/robertyoung/maps/69585/what-utm-zone-am-i-in-#">this
website</a>
provides an interactive way for you to find the “best” UTM Zone for any
given location.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ni_utm</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">UTM</span><span class="p">(</span><span class="n">XX</span><span class="p">)</span>  <span class="c1"># create a Universal Transverse Mercator reference system to transform our data.</span>
<span class="c1"># be sure to fill in XX above with the correct number for the UTM Zone that Northern Ireland is part of.</span>
</pre></div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">ccrs.CRS()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/generated/cartopy.crs.CRS.html">documentation</a>),
along with the <code class="docutils literal notranslate"><span class="pre">.crs</span></code> attribute of a <strong>GeoDataFrame</strong>, in order to
create a <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> <strong>CRS</strong> that can be used with other <code class="docutils literal notranslate"><span class="pre">cartopy</span></code>
functions and objects:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ccrs</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="n">outline</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span> <span class="c1"># create a cartopy CRS representation of the CRS associated with the outline dataset</span>
</pre></div>
</div>
<p>We’ll use this, along with the <code class="docutils literal notranslate"><span class="pre">.crs</span></code> attributes of our datasets, in
order to plot everything in the correct location as we add items to our
map.</p>
<p>To create the map, we start by using <code class="docutils literal notranslate"><span class="pre">plt.figure()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html">documentation</a>),
along with the <code class="docutils literal notranslate"><span class="pre">figsize</span></code> argument, to create a new <strong>Figure</strong> object.
The <strong>Figure</strong> is the container that we use to create different plots,
such as our map.</p>
<p>While the <strong>Figure</strong> is the container that we use to create different
plots, these plots are actually displayed by an object called an
<strong>Axes</strong> - the “artist” that will actually draw the plot. Here, we’re
using <code class="docutils literal notranslate"><span class="pre">plt.axes()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.axes.html">documentation</a>)
to create an empty <strong>Axes</strong> on the current <strong>Figure</strong>.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">projection</span></code> keyword argument along with our <strong>CRS</strong> object
to set the <strong>Axes</strong>’ projection to be our UTM Zone - this way, we can
be sure that the data that we pass to the <strong>Axes</strong> in order to plot are
shown in the correct location:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>  <span class="c1"># create a figure of size 8x8 (representing the page size in inches)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ni_utm</span><span class="p">)</span>  <span class="c1"># create an axes object in the figure, using a UTM projection,</span>
<span class="c1"># where we can actually plot our data.</span>
</pre></div>
</div>
<p>As you can see, the <strong>Axes</strong> starts off blank - we haven’t added
anything to it yet.</p>
<p>Because we are using the <strong>widget</strong> option for <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> (cf. the
first cell you ran up above):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">widget</span>
</pre></div>
</div>
<p>you can see how the original <strong>Figure</strong> object updates as we continue
through the rest of the steps of the practical by scrolling back up to
this point after adding new objects/features to the map.</p>
<p>However, I have also added <code class="docutils literal notranslate"><span class="pre">fig</span></code> statements in most of the cells where
we add something to the map, so that you can see the updates as they are
made without having to scroll all the way back up the page.</p>
</section>
<section id="adding-data-to-the-map">
<h3>adding data to the map<a class="headerlink" href="#adding-data-to-the-map" title="Permalink to this heading">#</a></h3>
<p>Now that we’ve created a figure and axes, we can start adding data to
the map. To start, we’ll add the municipal borders.</p>
<p>In order to add these to the map, we first have to create features that
we can add to the axes using the <code class="docutils literal notranslate"><span class="pre">ShapelyFeature</span></code> class
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/generated/cartopy.feature.ShapelyFeature.html#cartopy.feature.ShapelyFeature">documenation</a>)
from <code class="docutils literal notranslate"><span class="pre">cartopy.feature</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/feature.html">documentation</a>).</p>
<p>The initialization method for this class takes a minimum of two
arguments: an <strong>iterable</strong> containing the geometries that we’re using,
and a CRS representation corresponding to the coordinate reference
system of those geometries.</p>
<p>To add the County borders, then, we can use <code class="docutils literal notranslate"><span class="pre">counties['geometry']</span></code>,
the <strong>GeoSeries</strong> of the feature geometries in our outline shapefile,
and <code class="docutils literal notranslate"><span class="pre">outline.crs</span></code>, the CRS attribute of that shapefile:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first, we just add the outline of Northern Ireland using cartopy&#39;s ShapelyFeature</span>
<span class="n">outline_feature</span> <span class="o">=</span> <span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">outline</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">],</span> <span class="n">ni_utm</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">outline_feature</span><span class="p">)</span> <span class="c1"># add the features we&#39;ve created to the map.</span>
</pre></div>
</div>
<p>The other arguments that we pass to <code class="docutils literal notranslate"><span class="pre">ShapelyFeature</span></code> tell
<code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> how to draw the features - in this case, with an edge
color (<code class="docutils literal notranslate"><span class="pre">edgecolor</span></code>) of black (<code class="docutils literal notranslate"><span class="pre">'k'</span></code>) and a face color
(<code class="docutils literal notranslate"><span class="pre">facecolor</span></code>) of white (<code class="docutils literal notranslate"><span class="pre">'w'</span></code>). Once we’ve created the features, we
add them to the axes using the <code class="docutils literal notranslate"><span class="pre">add_feature</span></code> method.</p>
<p>As you can see from the output above, we have added the outline to the
map, but it’s very zoomed out (by default, it displays the <em>entire</em> UTM
Zone, stretching from the Equator to the North Pole). We can zoom the
map into our area of interest by using the boundary of the shapefile
features along with <code class="docutils literal notranslate"><span class="pre">.set_extent()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/generated/cartopy.mpl.geoaxes.GeoAxes.html#cartopy.mpl.geoaxes.GeoAxes.set_extent">documentation</a>).</p>
<p>First, we get the boundary of the shapefile features using
<code class="docutils literal notranslate"><span class="pre">.total_bounds</span></code>
(<a class="reference external" href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoSeries.total_bounds.html">documentation</a>),
then use these values when we call <code class="docutils literal notranslate"><span class="pre">.set_extent()</span></code>. In the example
below, we’re setting the extent with a 5 km buffer around each edge:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">outline</span><span class="o">.</span><span class="n">total_bounds</span> <span class="c1"># using the boundary of the shapefile features, zoom the map to our area of interest</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="n">xmin</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="n">xmax</span><span class="o">+</span><span class="mi">5000</span><span class="p">,</span> <span class="n">ymin</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="n">ymax</span><span class="o">+</span><span class="mi">5000</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ni_utm</span><span class="p">)</span> <span class="c1"># because total_bounds gives output as xmin, ymin, xmax, ymax,</span>
<span class="c1"># but set_extent takes xmin, xmax, ymin, ymax, we re-order the coordinates here.</span>

<span class="n">fig</span> <span class="c1">## re-draw the figure so you don&#39;t have to scroll back up</span>
</pre></div>
</div>
<p>This is a fine start to our map, but a bit boring. For one thing, we
might want to set different colors for the different county outlines,
rather than having them all be the same color. To do this, we’ll first
have to count the number of <strong>unique</strong> counties in our dataset, then
select colors to represent each of them.</p>
<p>Question: Why might we do this, rather than just use the number of
features in the dataset?</p>
<p>Run the cell below to count the number of unique municipalities in the
dataset, using the <code class="docutils literal notranslate"><span class="pre">unique</span></code> method on the <strong>CountyName</strong> GeoSeries.</p>
<p>Note that in addition to the standard indexing (i.e.,
<code class="docutils literal notranslate"><span class="pre">counties['CountyName']</span></code>), we are accessing <strong>CountyName</strong> directly as
an attribute of <code class="docutils literal notranslate"><span class="pre">counties</span></code> (i.e., <code class="docutils literal notranslate"><span class="pre">counties.CountyName</span></code>). Provided
that the column name follows particular rules (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/indexing.html#attribute-access">more on this
here</a>),
there is no difference between these two methods - they give the same
results.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the number of unique municipalities we have in the dataset</span>
<span class="n">num_counties</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">CountyName</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of unique features: </span><span class="si">{</span><span class="n">num_counties</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1"># note how we&#39;re using an f-string with {} here!</span>
</pre></div>
</div>
<p>Now that you’ve found the number of colors you need to choose, you can
use the image below to make a list of the colors. There are other ways
to select colors using matplotlib, including using RGB values or Hex
codes, but that’s for another day. If you’re interested in learning
more, you can check out the documentation
<a class="reference external" href="https://matplotlib.org/stable/api/colors_api.html">here</a>.</p>
<a class="reference internal image-reference" href="../../../_images/named_colors.png"><img alt="a list of named colors in matplotlib" class="align-center" src="../../../_images/named_colors.png" style="width: 600px;" /></a>
<p><a class="reference external" href="https://matplotlib.org/stable/gallery/color/named_colors.html">source</a></p>
<p>You can also go to to <a class="reference external" href="https://colorbrewer2.org">ColorBrewer</a>, which
will help you make sure that your color palette is colorblind-friendly,
print-friendly, and photocopy-friendly. Other helpful websites for
checking color accessibility or generating color palettes include
<a class="reference external" href="https://www.color-blindness.com/coblis-color-blindness-simulator/">Coblis</a>,
<a class="reference external" href="https://www.learnui.design/tools/data-color-picker.html">Learn UI
Design</a>, or
<a class="reference external" href="https://davidmathlogic.com/colorblind/">Coloring for
Colorblindness</a>.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pick colors for the individual county boundaries - make sure to add enough for each of the counties</span>
<span class="c1"># to add a color, enclose the name above (e.g., violet) with single (or double) quotes: &#39;violet&#39;</span>
<span class="c1"># remember that each colors should be separated by a comma</span>
<span class="n">county_colors</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># get a list of unique names for the county boundaries</span>
<span class="n">county_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">CountyName</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">county_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> <span class="c1"># sort the counties alphabetically by name</span>

<span class="c1"># next, add the municipal outlines to the map using the colors that we&#39;ve picked.</span>
<span class="c1"># here, we&#39;re iterating over the unique values in the &#39;CountyName&#39; field.</span>
<span class="c1"># we&#39;re also setting the edge color to be black, with a line width of 0.5 pt.</span>
<span class="c1"># Feel free to experiment with different colors and line widths.</span>
<span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">county_names</span><span class="p">):</span>
    <span class="n">feat</span> <span class="o">=</span> <span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">counties</span><span class="p">[</span><span class="s1">&#39;CountyName&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">],</span> <span class="c1"># first argument is the geometry</span>
                          <span class="n">ccrs</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">crs</span><span class="p">),</span> <span class="c1"># second argument is the CRS</span>
                          <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="c1"># outline the feature in black</span>
                          <span class="n">facecolor</span><span class="o">=</span><span class="n">county_colors</span><span class="p">[</span><span class="n">ii</span><span class="p">],</span> <span class="c1"># set the face color to the corresponding color from the list</span>
                          <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="c1"># set the outline width to be 1 pt</span>
                          <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span> <span class="c1"># set the alpha (transparency) to be 0.25 (out of 1)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">feat</span><span class="p">)</span> <span class="c1"># once we have created the feature, we have to add it to the map using ax.add_feature()</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>In the code above, note this line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ccrs</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span> <span class="c1"># second argument is the CRS</span>
</pre></div>
</div>
<p>As we saw above, this creates a new cartopy <strong>CRS</strong> object using the
<code class="docutils literal notranslate"><span class="pre">.crs</span></code> attribute of the <strong>GeoDataFrame</strong>. If we’re not sure that all
of our datasets use the same CRS, or we haven’t re-projected them all to
a single CRS, we can use this to make sure that cartopy uses the correct
CRS when displaying each dataset on the map.</p>
<p>Now that we’ve done this for the county boundaries, we can also do this
for the water datasets. Because we want each of the water bodies to use
the same symbology, we add them with a single use of <strong>ShapelyFeature</strong>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># here, we&#39;re setting the edge color to be the same as the face color. Feel free to change this around,</span>
<span class="c1"># and experiment with different line widths.</span>
<span class="n">water_feat</span> <span class="o">=</span> <span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">water</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">],</span> <span class="c1"># first argument is the geometry</span>
                            <span class="n">ccrs</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="n">water</span><span class="o">.</span><span class="n">crs</span><span class="p">),</span> <span class="c1"># second argument is the CRS</span>
                            <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;mediumblue&#39;</span><span class="p">,</span> <span class="c1"># set the edgecolor to be mediumblue</span>
                            <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;mediumblue&#39;</span><span class="p">,</span> <span class="c1"># set the facecolor to be mediumblue</span>
                            <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># set the outline width to be 1 pt</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">water_feat</span><span class="p">)</span> <span class="c1"># add the collection of features to the map</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>To add the rivers dataset to the map, we can again use
<code class="docutils literal notranslate"><span class="pre">ShapelyFeature()</span></code>, with <code class="docutils literal notranslate"><span class="pre">ccrs.CRS(rivers.crs)</span></code> as the CRS argument.
Note that because these are <strong>LineString</strong> objects, not <strong>Polygon</strong>s,
we don’t set the <code class="docutils literal notranslate"><span class="pre">facecolor</span></code> property.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_feat</span> <span class="o">=</span> <span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">rivers</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">],</span> <span class="c1"># first argument is the geometry</span>
                            <span class="n">ccrs</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="n">rivers</span><span class="o">.</span><span class="n">crs</span><span class="p">),</span> <span class="c1"># second argument is the CRS</span>
                            <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;royalblue&#39;</span><span class="p">,</span> <span class="c1"># set the edgecolor to be royalblue</span>
                            <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span> <span class="c1"># set the linewidth to be 0.2 pt</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">river_feat</span><span class="p">)</span> <span class="c1"># add the collection of features to the map</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>Before we add the <code class="docutils literal notranslate"><span class="pre">towns</span></code> data to the map, let’s take a look at the
CRS attribute for this dataset:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">towns</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
<p>Here, we have <em>geographic</em> coordinates (WGS84 latitude/longitude),
rather than <em>projected</em> coordinates (e.g., UTM or Irish Transverse
Mercator). Because our map is currently set to a projected coordinate
system, we can’t simply use <code class="docutils literal notranslate"><span class="pre">ccrs.CRS()</span></code> with the CRS for <code class="docutils literal notranslate"><span class="pre">towns</span></code>,
as we have done for the previous few datasets.</p>
<p>Instead, we can use <code class="docutils literal notranslate"><span class="pre">ccrs.PlateCarree()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/projections.html#platecarree">documentation</a>),
or <a class="reference external" href="https://proj.org/en/9.3/operations/projections/eqc.html">plate
carrée</a>,
which is an <em>equirectangular projection</em> that uses latitude/longitude
values as the projected x/y values. This way, we are able to plot the
geographic coordinates in our projected system.</p>
<p>Because these are <strong>Point</strong> data, we can use <code class="docutils literal notranslate"><span class="pre">ax.plot()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html">documentation</a>)
directly, rather than <strong>ShapelyFeature</strong>.</p>
<p>The code below will add a gray (<code class="docutils literal notranslate"><span class="pre">color='0.5'</span></code>) square (<code class="docutils literal notranslate"><span class="pre">'s'</span></code>) marker
of size 6 (<code class="docutils literal notranslate"><span class="pre">ms=6</span></code>) at each x, y location:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ShapelyFeature creates a polygon, so for point data we can just use ax.plot()</span>
<span class="n">town_handle</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">towns</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">towns</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;0.5&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span> <span class="c1"># towns is in UTM Zone 29N, so we can use ni_utm</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
</section>
<section id="adding-labels-and-legends">
<h3>adding labels and legends<a class="headerlink" href="#adding-labels-and-legends" title="Permalink to this heading">#</a></h3>
<p>Now that we have different colors for each of the county boundaries and
we’ve displayed lakes, rivers, and towns, it might be good to have a
legend to keep everything straight.</p>
<p>To do this, we get handles for each of the county boundaries, using the
colors we defined earlier. Here, we’re using our helper function
<code class="docutils literal notranslate"><span class="pre">generate_handles()</span></code>, defined at the beginning of the exercise.</p>
<p>The function as defined above has a <em>docstring</em> that can be used to view
information about how to use the function through our normal “help”
routines (for example, the <code class="docutils literal notranslate"><span class="pre">?</span></code> operator in jupyter/ipython):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">generate_handles</span><span class="p">)</span> <span class="c1"># show the help for our generate_handles function</span>
</pre></div>
</div>
<p>This function returns a <strong>list</strong> of <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> handles (i.e., the
identifier that <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> uses for the different objects in the
figure) given a <strong>list</strong> of labels and colors, which we can then pass to
<code class="docutils literal notranslate"><span class="pre">ax.legend()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.legend.html#">documentation</a>)
in order to generate a legend for our map, which explains what the
different symbols and colors mean. We also have optional arguments to
change the edge color and the transparency of the patches, if we want.</p>
<p>The cell below will generate <strong>list</strong>s of handles for the counties,
water bodies, and rivers:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate a list of handles for the county datasets</span>
<span class="c1"># first, we add the list of names, then the list of colors, and finally we set the transparency</span>
<span class="c1"># (since we set it in the map)</span>
<span class="n">county_handles</span> <span class="o">=</span> <span class="n">generate_handles</span><span class="p">(</span><span class="n">counties</span><span class="o">.</span><span class="n">CountyName</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">county_colors</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>

<span class="c1"># note: if you change the color you use to display lakes, you&#39;ll want to change it here, too</span>
<span class="n">water_handle</span> <span class="o">=</span> <span class="n">generate_handles</span><span class="p">([</span><span class="s1">&#39;Lakes&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;mediumblue&#39;</span><span class="p">])</span>

<span class="c1"># note: if you change the color you use to display rivers, you&#39;ll want to change it here, too</span>
<span class="n">river_handle</span> <span class="o">=</span> <span class="p">[</span><span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;royalblue&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Note that the names in our county dataset are all uppercase - that’s not
necessarily how we want to display them on the map. To change this, we
can use a string method, <code class="docutils literal notranslate"><span class="pre">.title()</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.title">documentation</a>),
which capitalizes the first letter of each word in the string.</p>
<p>We will need to do this for each of the items in our list of names. Now,
we <em>could</em> write this as a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nice_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># initalize an empty list</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">county_names</span><span class="p">:</span>
    <span class="n">nice_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>
</pre></div>
</div>
<p>But, python offers another, cleaner option, called a <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">list
comprehension</a>.
A <strong>list comprehension</strong> allows us to generate a new list from an
existing iterable (for example, a <strong>Series</strong>).</p>
<p>To write the same <code class="docutils literal notranslate"><span class="pre">for</span></code> loop shown above as a list comprehension takes
a single line:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># update county_names to take it out of uppercase text</span>
<span class="n">nice_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">county_names</span><span class="p">]</span>
</pre></div>
</div>
<p>That’s it. This creates a new list by iterating over each of the items
in county_names, applying <code class="docutils literal notranslate"><span class="pre">.title()</span></code> to each item. We’ll work more
with list comprehensions throughout the module, as they provide a way to
simplify some pretty complicated loops.</p>
<p>Finally, we’re ready to add our legend using <code class="docutils literal notranslate"><span class="pre">ax.legend()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.legend.html#">documentation</a>).</p>
<p>As you can see from the call signature in the documentation above, we
can pass each of our lists of handles and labels to <code class="docutils literal notranslate"><span class="pre">ax.legend()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> will construct the legend based on these inputs. Feel
free to modify the legend by changing the placement (for example, by
changing the <code class="docutils literal notranslate"><span class="pre">loc</span></code> keyword argument), or the font size, the title font
size, or other parameters:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ax.legend() takes a list of handles and a list of labels corresponding to the objects</span>
<span class="c1"># you want to add to the legend</span>
<span class="n">handles</span> <span class="o">=</span> <span class="n">county_handles</span> <span class="o">+</span> <span class="n">water_handle</span> <span class="o">+</span> <span class="n">river_handle</span> <span class="o">+</span> <span class="n">town_handle</span> <span class="c1"># use &#39;+&#39; to concatenate (combine) lists</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">nice_names</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;Lakes&#39;</span><span class="p">,</span> <span class="s1">&#39;Rivers&#39;</span><span class="p">,</span> <span class="s1">&#39;Towns&#39;</span><span class="p">]</span>

<span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">title_fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>Now that we have a legend, let’s go ahead and add grid lines to our plot
using <code class="docutils literal notranslate"><span class="pre">ax.gridlines()</span></code>
(<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/reference/generated/cartopy.mpl.geoaxes.GeoAxes.html#cartopy.mpl.geoaxes.GeoAxes.gridlines">documentation</a>).
Without any arguments, this method will automatically determine the
“best” gridlines to use for our map, given the extent, the CRS, and so
on. We can also specify where to draw lines using the <code class="docutils literal notranslate"><span class="pre">xlocs</span></code> and
<code class="docutils literal notranslate"><span class="pre">ylocs</span></code> keyword arguments, which take an <strong>iterable</strong> of locations to
draw along the x and y axis, respectively.</p>
<p>What happens if you delete the first and/or last value from xlocs and
ylocs? Try it and see!</p>
<p>Can you change the labels to show <em>only</em> on the bottom and left side of
the map? To see, try looking at this
<a class="reference external" href="https://scitools.org.uk/cartopy/docs/latest/gallery/gridlines_and_labels/gridliner.html">example</a>,
or at the documentation linked above.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gridlines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># draw  labels for the grid lines</span>
                         <span class="n">xlocs</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.5</span><span class="p">],</span> <span class="c1"># add longitude lines at 0.5 deg intervals</span>
                         <span class="n">ylocs</span><span class="o">=</span><span class="p">[</span><span class="mi">54</span><span class="p">,</span> <span class="mf">54.5</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mf">55.5</span><span class="p">])</span> <span class="c1"># add latitude lines at 0.5 deg intervals</span>
<span class="n">gridlines</span><span class="o">.</span><span class="n">left_labels</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># turn off the left-side labels</span>
<span class="n">gridlines</span><span class="o">.</span><span class="n">bottom_labels</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># turn off the bottom labels</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>Now, let’s add text labels for each of our individual towns. For each of
the points representing our towns/cities, we can place a text label
using <code class="docutils literal notranslate"><span class="pre">ax.text()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.text.html">documentation</a>).</p>
<p>Look over the cell below, and make sure you understand what each line is
doing. If you’re not sure you understand, remember that you can post
your questions on Blackboard.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">towns</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span> <span class="c1"># towns.iterrows() returns the index and row</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span> <span class="c1"># get the x,y location for each town</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;TOWN_NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span> <span class="c1"># use plt.text to place a label at x,y</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>Last but not least, let’s add a scale bar to the plot. The
<code class="docutils literal notranslate"><span class="pre">scale_bar()</span></code> function we’ve defined above will produce a scale bar
with divisions at 10 and 20 km, with a location in the upper right
corner as default:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scale_bar</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span> <span class="c1"># place a scale bar in the upper right corner of the map window</span>

<span class="n">fig</span> <span class="c1"># to show the updated figure</span>
</pre></div>
</div>
<p>Finally, we’ll save our figure using <code class="docutils literal notranslate"><span class="pre">.savefig()</span></code>
(<a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.savefig">documentation</a>).</p>
<p>The code written below will save the figure to the current folder in a
file called <code class="docutils literal notranslate"><span class="pre">map.png</span></code>, with no border around the outside of the map,
and with a resolution of 300 dots per inch. As always, feel free to
experiment with or change these parameters.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;map.png&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="further-exercises-and-next-steps">
<h3>further exercises and next steps<a class="headerlink" href="#further-exercises-and-next-steps" title="Permalink to this heading">#</a></h3>
<p>In this directory, you should also have a python script,
<strong>practical2_script.py</strong>, which will create the same map that we’ve made
here (though perhaps with different colors). For some additional
practice, try at least one of the following:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">towns</span></code> dataset has an attribute, <strong>STATUS</strong>, that describes
whether the feature represents a “Town” (e.g., Coleraine), or a “City”
(e.g., Belfast). Modify the script to plot all of the <strong>Towns</strong> with
one marker (e.g., the gray square used above), and plot all of the
<strong>Cities</strong> with a different marker, then add each of these to the
legend. For more information on the available markers and colors for
matplotlib, see the
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html">documentation</a>.</p></li>
<li><p>Try to modify the <code class="docutils literal notranslate"><span class="pre">scale_bar()</span></code> function to have divisions at 1, 5,
and 10 km, instead of at 10 km.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="debugging.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">debugging exercise</p>
      </div>
    </a>
    <a class="right-next"
       href="conflicts.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">conflict resolution (using git)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#synching-forks">synching forks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#merging-branches">merging branches</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-script">running the script</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ryan-gosling">Ryan Gosling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">getting started</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data">loading the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-coordinate-reference-systems">working with coordinate reference systems</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-data-to-the-map">adding data to the map</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-labels-and-legends">adding labels and legends</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-exercises-and-next-steps">further exercises and next steps</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bob McNabb
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Bob McNabb. Licensed under Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0).
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>